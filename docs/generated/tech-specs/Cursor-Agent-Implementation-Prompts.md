# Prompts для реализации Tech Specs агентом Cursor

**Проект:** «Эмоциональный баланс»  
**Назначение:** copy‑paste промпты “1 техспека = 1 запуск Cursor‑агента”  
**Источник порядка:** `docs/Final-Implementation-Checklist.md` (раздел «ПОРЯДОК РЕАЛИЗАЦИИ ДЛЯ АГЕНТА CURSOR»)  
**Техспеки:** `docs/generated/tech-specs/*.md`

---

## Как пользоваться

- **Запускай агента строго по порядку ниже** (фазы/недели).  
- Для каждой фичи: **копируй промпт целиком**, вставляй в Cursor и запускай как отдельную сессию.
- Если в техспеке есть **implementation slices** — выполняй в рамках одной сессии по slice‑плану (или дели на отдельные сессии, если так удобнее).

---

## Базовый “guardrails” (встроен в каждый промпт)

- Clean Architecture + DDD: Domain → Application → Infrastructure → Presentation; зависимости направлены внутрь.
- Privacy by design: события строго по `docs/Tracking-Plan.md`; **никаких PII/свободного текста** в аналитике; по возможности — агрегаты.
- Security: секреты не коммитить; RBAC/аудит/идемпотентность где указано; безопасная обработка ошибок.
- A11y: для UI — WCAG 2.2 AA на критичных сценариях (клавиатура/фокус/семантика/контраст).
- Тесты: unit + integration + e2e для critical paths; деградации/негативные сценарии покрыть.
- DoD: AC из техспеки выполнены; линтер/тайпчек/тесты проходят; документация/README обновлены если нужно.

---

## Фаза 1: Foundation (Weeks 1–2)

### FEAT-PLT-01 — Репо‑скелет, CI/CD, окружения (Day 1–3)

```text
Ты — Cursor Agent в репозитории «Эмоциональный баланс».
Задача: реализовать фичу FEAT-PLT-01 строго по техспеке: docs/generated/tech-specs/FEAT-PLT-01.md

Предусловия/контекст:
- Это стартовый фундамент: структура проекта, базовые окружения, CI/CD, dev/stage/prod.

Обязательные правила (guardrails):
- Clean Architecture + DDD (слои и зависимости внутрь).
- Security: secrets НЕ хранить в репо; подготовить шаблоны env.
- Тесты/линтер/тайпчек должны проходить в CI.

Шаги:
1) Прочитай техспеку FEAT-PLT-01 и все ссылки из неё (docs/Technical-Decisions.md, docs/Архитектурный-обзор.md и т.п.).
2) Подними каркас проекта (папки/пакеты), минимальные конфиги, форматирование, проверки.
3) Настрой CI pipeline: install → lint → typecheck → tests → build.
4) Подготовь окружения: .env.example, документация по запуску.
5) Проверь, что всё запускается локально и в CI.

Definition of Done:
- Репозиторий собирается; CI зелёный; есть понятный README для dev/stage/prod.
```

### FEAT-PLT-02 — БД + миграции по модели данных (Day 4–7)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-PLT-02 по техспеке: docs/generated/tech-specs/FEAT-PLT-02.md

Зависимости:
- FEAT-PLT-01 завершён.
Референсы:
- Модель данных: docs/Модель-данных.md

Guardrails: Clean Architecture + DDD; миграции воспроизводимы; никаких секретов в репо.

Шаги:
1) Прочитай техспеку и модель данных.
2) Подними Postgres (или выбранную БД) и слой инфраструктуры миграций.
3) Создай схему/миграции, сиды для dev/test (если требуется), доступ через репозитории/интерфейсы.
4) Добавь базовые интеграционные тесты на миграции/подключение.

DoD:
- Миграции накатываются с нуля; схема соответствует модели; есть быстрый способ поднять БД локально.
```

### FEAT-PLT-03 — RBAC + сессии (Day 8–10)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-PLT-03 по техспеке: docs/generated/tech-specs/FEAT-PLT-03.md

Зависимости:
- FEAT-PLT-02 завершён.

Guardrails:
- RBAC: owner/assistant/editor/client.
- Security: безопасные cookies/токены, защита от CSRF где применимо.

Шаги:
1) Прочитай техспеку и связанные решения.
2) Реализуй доменные модели доступа (roles/permissions), use-cases аутентификации/авторизации.
3) Добавь инфраструктурную реализацию (session store, middleware/guards) и минимальные UI/API точки входа.
4) Покрой тестами: вход/выход, запреты, негативные кейсы.

DoD:
- Можно создать пользователя, залогиниться, и RBAC реально ограничивает доступ.
```

### FEAT-PLT-04 — Медиа-статика (VPS) (Day 11–12)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-PLT-04 по техспеке: docs/generated/tech-specs/FEAT-PLT-04.md

Зависимости:
- FEAT-PLT-01 завершён (инфраструктура проекта).

Guardrails:
- Security: pre-signed URLs, ограничения типов/размеров.
- Observability: логи ошибок загрузки/удаления.

Шаги:
1) Прочитай техспеку и решения по медиа-хранилищу (локальная статика на VPS).
2) Реализуй интерфейсы хранилища в Domain/Application и реализацию в Infrastructure.
3) Добавь API/UI для загрузки/привязки медиа (минимум).
4) Тесты: позитив/негатив (тип/размер/истекший URL).

DoD:
- Можно загрузить файл и получить доступ к нему; политика доступа корректна.
```

### FEAT-PLT-05 — Аудит‑лог (Day 13–14)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-PLT-05 по техспеке: docs/generated/tech-specs/FEAT-PLT-05.md

Зависимости:
- FEAT-PLT-03 завершён (пользователи/сессии/RBAC).

Guardrails:
- Логировать только необходимые поля; без PII/чувствительного текста, если не требуется спеками.

Шаги:
1) Прочитай техспеку.
2) Определи доменную модель AuditEvent и интерфейс репозитория.
3) Реализуй запись в аудит‑лог из критичных действий (минимальный набор).
4) Добавь просмотр (админ‑эндпойнт/страница) если указано.
5) Тесты: запись событий и контроль доступа.

DoD:
- Действия фиксируются; доступ ограничен; записи корректно формируются.
```

---

## Фаза 2: Core Domain — Interactive & Content (Weeks 3–5)

### Week 3

#### FEAT-INT-01 — Платформа интерактивов (без логина) + агрегаты

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-INT-01 по техспеке: docs/generated/tech-specs/FEAT-INT-01.md

Зависимости:
- FEAT-PLT-02 завершён (БД/репозитории).

Guardrails:
- Privacy: хранить/трекать только агрегаты (например result_level), не сырые ответы/тексты.

Шаги:
1) Прочитай техспеку и матрицу интерактивов: docs/Interactive-Modules-Matrix.md (если требуется).
2) Реализуй доменную модель InteractiveRun/ResultAggregate и use-cases запуска/завершения.
3) Добавь инфраструктуру хранения агрегатов.
4) Подключи события аналитики строго по Tracking Plan.
5) Тесты: создание run, расчёт агрегатов, негативные кейсы.

DoD:
- Гость может пройти интерактивный сценарий и получить агрегированный результат.
```

#### FEAT-CNT-01 — CMS: markdown + preview (4 slices)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-CNT-01 по техспеке: docs/generated/tech-specs/FEAT-CNT-01.md

Зависимости:
- FEAT-PLT-03 (RBAC), FEAT-PLT-04 (медиа-статика) завершены.

Важно:
- Эта фича близка к лимиту контекста. Следуй slice-плану из техспеки (4 slices).

Guardrails:
- Security: доступ к CMS только ролям из RBAC.
- SEO: корректные slug/мета, если указано.

Шаги:
1) Прочитай техспеку, затем реализуй по slices (A→D) без расширения scope.
2) Обеспечь хранение markdown, предпросмотр, публикацию, статусы.
3) Тесты: права, публикация, рендер, негативные кейсы.

DoD:
- Контент можно создать/предпросмотреть/опубликовать; публичная часть корректно отображает.
```

#### FEAT-WEB-01 — Главная как “путь клиента”

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-WEB-01 по техспеке: docs/generated/tech-specs/FEAT-WEB-01.md

Зависимости:
- FEAT-INT-01 (интерактивы), FEAT-CNT-01 (CMS) должны быть доступны хотя бы минимально.

Guardrails:
- A11y: клавиатура/фокус/семантика для главной.
- Tracking: только разрешённые параметры, без PII.

Шаги:
1) Прочитай техспеку и IA: docs/information-architecture.md (если нужно).
2) Реализуй главную страницу и ключевые CTA (quiz/booking/tg) по спекам.
3) Подключи события аналитики.
4) Добавь e2e/smoke тесты ключевых кликов.

DoD:
- Пользователь понимает “что делать дальше” и может стартовать интерактив/переход к записи.
```

### Week 4

#### FEAT-INT-02 — Квизы (QZ‑01/02) с редактируемыми текстами

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-INT-02 по техспеке: docs/generated/tech-specs/FEAT-INT-02.md

Зависимости:
- FEAT-INT-01 завершён.

Важно про “редактируемые тексты”:
- Если админский UI для редактирования появится позже (FEAT-ADM-03), реализуй сейчас хранение/модель/контракты так, чтобы FEAT-ADM-03 позже подключился без ломки. До этого используй seed/fixture данные по техспеке.

Guardrails:
- Privacy: не сохранять/не трекать ответы; только агрегат/уровень результата.
- A11y: прохождение квиза с клавиатуры/скринридером.

Шаги:
1) Прочитай техспеку и матрицу интерактивов.
2) Реализуй движок квиза, расчёт результата, тексты результатов.
3) Подключи трекинг событий по Tracking Plan.
4) Тесты: сценарии прохождения, пограничные условия, негативные кейсы.

DoD:
- Гость проходит QZ‑01/02 и получает корректный агрегированный результат.
```

#### FEAT-INT-06 — Кризисный режим

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-INT-06 по техспеке: docs/generated/tech-specs/FEAT-INT-06.md

Зависимости:
- FEAT-WEB-03 (служебные/экстренная помощь) должен существовать или быть реализован как часть спеки.

Guardrails:
- Кризисный режим перекрывает “продажные” CTA: при триггерах показывать экстренную помощь и безопасные шаги.
- Никаких чувствительных данных в аналитике.

Шаги:
1) Прочитай техспеку и документы по кризисным блокам/дисклеймерам.
2) Реализуй UX переключения/триггеры/контент экстренной помощи.
3) Покрой e2e: сценарии входа в кризисный режим и выход/фолбэки.

DoD:
- При триггерах пользователь попадает в безопасный поток, без давления и без утечек данных.
```

#### FEAT-WEB-02 — Страницы доверия (О психологе/Как проходит/FAQ)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-WEB-02 по техспеке: docs/generated/tech-specs/FEAT-WEB-02.md

Зависимости:
- FEAT-CNT-01 (CMS) доступен для наполнения/рендера.

Guardrails:
- A11y и корректная семантика.
- Контент и дисклеймеры строго по спекам/гайдам.

Шаги:
1) Прочитай техспеку и Content Guide: docs/Content-Guide-UX-Copywriting.md
2) Реализуй страницы и шаблоны, подключи CMS-источник данных.
3) Добавь минимальный трекинг просмотров (без PII).

DoD:
- Страницы рендерятся из CMS/контента, доступны и корректно оформлены.
```

#### FEAT-WEB-03 — Служебные страницы (политики/дисклеймеры/экстренная помощь)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-WEB-03 по техспеке: docs/generated/tech-specs/FEAT-WEB-03.md

Зависимости:
- FEAT-CNT-01 (CMS) предпочтительно, но допускается статический минимум, если в техспеке так разрешено.

Guardrails:
- Юридические/приватные тексты не искажать.
- A11y для текстовых страниц.

Шаги:
1) Прочитай техспеку.
2) Реализуй страницы: Privacy/Terms/Disclaimers/Urgent support.
3) Проверь, что кризисный режим (FEAT-INT-06) может ссылаться на эти страницы/блоки.

DoD:
- Служебные страницы доступны, корректно связаны, используются кризисными потоками.
```

### Week 5

#### FEAT-INT-03 — Навигатор состояния (ветвление), базовая версия

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-INT-03 по техспеке: docs/generated/tech-specs/FEAT-INT-03.md

Зависимости:
- FEAT-INT-01 завершён.

Guardrails:
- Privacy: не хранить сырые шаги/тексты пользователя; только агрегаты/выбранные уровни/маршруты если разрешено.

Шаги:
1) Прочитай техспеку.
2) Реализуй модель ветвлений/шагов, движок прохождения, выдачу рекомендаций.
3) Подключи трекинг (только разрешённые параметры).
4) Тесты: ветвления, пограничные узлы, деградации.

DoD:
- Пользователь проходит навигатор и получает корректный следующий шаг/план.
```

#### FEAT-INT-04 — Скрипты границ (BND‑01)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-INT-04 по техспеке: docs/generated/tech-specs/FEAT-INT-04.md

Зависимости:
- FEAT-INT-01 завершён.

Примечание:
- Если библиотека вариантов должна редактироваться из админки позже (FEAT-ADM-03), сейчас заложи модель/хранилище и используй seed данные, не ломая будущую интеграцию.

Шаги:
1) Прочитай техспеку.
2) Реализуй выдачу/фильтрацию/поиск скриптов (минимум по спекам).
3) Тесты: выборки, доступность, A11y на UI.

DoD:
- Пользователь может выбрать/сохранить подходящий скрипт, не создавая чувствительных данных.
```

#### FEAT-INT-05 — Библиотека мини‑ритуалов + таймер + аудио

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-INT-05 по техспеке: docs/generated/tech-specs/FEAT-INT-05.md

Зависимости:
- FEAT-PLT-04 (медиа-статика) доступен.

Примечание:
- Если контент ритуалов редактируется из админки позже (FEAT-ADM-03), используй seed данные, но сделай хранилище/контракты готовыми к подключению админки.

Шаги:
1) Прочитай техспеку.
2) Реализуй каталог ритуалов, таймер, воспроизведение аудио (если требуется), сохранение прогресса (если разрешено).
3) Тесты: таймер, доступность, деградации при недоступном медиа.

DoD:
- Ритуалы доступны, воспроизводятся/отсчитываются корректно, UX доступен.
```

#### FEAT-CNT-02 — Каталог тем + лендинги

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-CNT-02 по техспеке: docs/generated/tech-specs/FEAT-CNT-02.md

Зависимости:
- FEAT-CNT-01 завершён.

Шаги:
1) Прочитай техспеку.
2) Реализуй сущности/страницы “тем”, перелинковку на статьи/ресурсы, SEO элементы.
3) Тесты: генерация/рендер, 404, доступность.

DoD:
- Темы отображаются, корректно ведут на контент, индексируются.
```

#### FEAT-CNT-03 — `/glossary/` минимальная версия

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-CNT-03 по техспеке: docs/generated/tech-specs/FEAT-CNT-03.md

Зависимости:
- FEAT-CNT-01 завершён.

Шаги:
1) Прочитай техспеку.
2) Реализуй страницы словаря, фильтрацию/поиск если указано, SEO.
3) Тесты: рендер, навигация, доступность.

DoD:
- Словарь работает и интегрируется в навигацию/контент.
```

#### FEAT-CNT-04 — `/curated/` минимальная версия

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-CNT-04 по техспеке: docs/generated/tech-specs/FEAT-CNT-04.md

Зависимости:
- FEAT-CNT-01 завершён.

Шаги:
1) Прочитай техспеку.
2) Реализуй подборки, связи с контентом, страницы подборок.
3) Тесты: рендер, 404, доступность.

DoD:
- Подборки отображаются, дают “быстрый вход” в полезный контент.
```

---

## Фаза 3: Booking & Payments (Weeks 6–8)

### Week 6

#### FEAT-BKG-01 — Каталог услуг + правила

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-BKG-01 по техспеке: docs/generated/tech-specs/FEAT-BKG-01.md

Зависимости:
- FEAT-CNT-01 завершён (контент/описания услуг).

Шаги:
1) Прочитай техспеку.
2) Реализуй доменную модель услуг/правил отмены/переноса, публичные страницы/эндпойнты.
3) Тесты: правила, негативные кейсы, доступность.

DoD:
- Пользователь видит услуги и правила; данные корректны; всё покрыто тестами.
```

#### FEAT-BKG-02 — Слоты и Google Calendar sync (slice A)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-BKG-02 (slice A) по техспеке: docs/generated/tech-specs/FEAT-BKG-02.md

Зависимости:
- FEAT-PLT-02 завершён.

Важно:
- Следуй slice‑плану из техспеки (A→D). Сейчас делаем slice A (OAuth/подключение).

Guardrails:
- Security: OAuth токены шифровать “в покое” (см. security спеки/решения).
- Observability: логи синхронизации и ошибок.

DoD:
- Подключение Google Calendar работает, токены хранятся безопасно, есть базовые тесты/моки.
```

### Week 7

#### FEAT-BKG-02 — Слоты и Google Calendar sync (slices B–D)

```text
Ты — Cursor Agent.
Задача: завершить FEAT-BKG-02 (slices B–D) по техспеке: docs/generated/tech-specs/FEAT-BKG-02.md

Зависимости:
- Slice A готов.

Шаги:
1) Реализуй двустороннюю синхронизацию/создание событий/правила доступности по техспеке.
2) Добавь защиту от гонок/конфликтов на уровне данных и use-cases.
3) Покрой интеграционными тестами, предусмотренными в спеках.

DoD:
- Слоты корректно строятся; события создаются/синхронизируются; деградации обработаны.
```

#### FEAT-BKG-03 — UI записи: услуга → слот → анкета → согласия

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-BKG-03 по техспеке: docs/generated/tech-specs/FEAT-BKG-03.md

Зависимости:
- FEAT-BKG-02 завершён, FEAT-PLT-03 (сессии/RBAC) готов.

Guardrails:
- Privacy: анкета/чувствительные поля — P2 (подготовь под шифрование из FEAT-SEC-02).

Шаги:
1) Прочитай техспеку.
2) Реализуй UI/flow записи и контракты API.
3) Добавь валидацию, негативные сценарии, деградации.
4) E2E: критичный путь записи.

DoD:
- Пользователь проходит запись до состояния “ожидает оплату/подтверждение” по логике техспеки.
```

#### FEAT-BKG-04 — Анти‑гонки: защита от конфликтов записи

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-BKG-04 по техспеке: docs/generated/tech-specs/FEAT-BKG-04.md

Зависимости:
- FEAT-BKG-03 завершён.

Шаги:
1) Прочитай техспеку.
2) Реализуй locking/idempotency/конфликт‑резолв, как описано.
3) Тесты: конкурентные сценарии, ретраи, таймауты.

DoD:
- Конфликты предотвращаются; пользователь получает понятные статусы/ошибки.
```

### Week 8

#### FEAT-PAY-01 — ЮKassa: создание платежа

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-PAY-01 по техспеке: docs/generated/tech-specs/FEAT-PAY-01.md

Зависимости:
- FEAT-BKG-03 завершён.

Guardrails:
- Security: секреты ЮKassa в env/secret store, не в репо.
- Idempotency keys где требуется.

DoD:
- Платёж создаётся, статусы корректны, обработка ошибок/деградаций есть, тесты есть.
```

#### FEAT-PAY-02 — ЮKassa webhooks: идемпотентность

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-PAY-02 по техспеке: docs/generated/tech-specs/FEAT-PAY-02.md

Зависимости:
- FEAT-PAY-01 и FEAT-PLT-02 завершены.

Guardrails:
- Идемпотентность: повторные webhooks не ломают состояние.
- Безопасная валидация подписи/источника (если указано).

DoD:
- Webhooks корректно обрабатываются и не создают дублей; есть тесты на ретраи/дубликаты.
```

#### FEAT-PAY-03 — Подтверждение записи после webhook

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-PAY-03 по техспеке: docs/generated/tech-specs/FEAT-PAY-03.md

Зависимости:
- FEAT-PAY-02 и FEAT-BKG-02 завершены.

DoD:
- Запись подтверждается только по истинному статусу оплаты; критичный путь покрыт e2e.
```

#### FEAT-BKG-05 — “Нет слотов” → waitlist / TG‑консьерж

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-BKG-05 по техспеке: docs/generated/tech-specs/FEAT-BKG-05.md

Зависимости:
- По роадмапу: FEAT-TG-02, но в порядке реализации эта фича делается раньше. Реализуй сейчас waitlist/UX/контракты так, чтобы интеграция с TG‑ботом подключилась позже без ломки.

DoD:
- Пользователь не упирается в тупик “нет слотов”; есть понятный следующий шаг (waitlist/консьерж).
```

---

## Фаза 4: Telegram Integration (Week 9)

### FEAT-TG-01 — Deep links schema + генерация

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-TG-01 по техспеке: docs/generated/tech-specs/FEAT-TG-01.md

Зависимости:
- FEAT-PLT-02 завершён.
Референс:
- docs/Telegram-Deep-Links-Schema.md

DoD:
- Генерация/парсинг deep links работает; deep_link_id склеивает события без PII.
```

### FEAT-TG-02 — Бот: онбординг + консьерж

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-TG-02 по техспеке: docs/generated/tech-specs/FEAT-TG-02.md

Зависимости:
- FEAT-TG-01 завершён.

Guardrails:
- Privacy: в сообщениях/логах/аналитике не хранить чувствительные тексты.

DoD:
- Бот проводит онбординг, умеет “сохранить/получить план”, и поддерживает консьерж‑ветку записи.
```

### FEAT-TG-03 — Канал: связка CTA (измеримость подписки)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-TG-03 по техспеке: docs/generated/tech-specs/FEAT-TG-03.md

Зависимости:
- FEAT-TG-01 завершён.

DoD:
- CTA из канала корректно ведут в нужные флоу и измеряются без PII.
```

---

## Фаза 5: Client Cabinet (Week 10)

### FEAT-LK-01 — ЛК: встречи/материалы

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-LK-01 по техспеке: docs/generated/tech-specs/FEAT-LK-01.md

Зависимости:
- FEAT-BKG-03 завершён.

DoD:
- Клиент видит свои встречи/материалы, доступ защищён.
```

### FEAT-LK-02 — Дневники (эмоции + ABC) + удаление

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-LK-02 по техспеке: docs/generated/tech-specs/FEAT-LK-02.md

Зависимости:
- FEAT-PLT-03 и FEAT-PLT-02 завершены.

Guardrails:
- Privacy: дневники — P2; подготовить под шифрование из FEAT-SEC-02.

DoD:
- Дневник создаётся/читается/удаляется; права соблюдены; тесты покрывают критичные кейсы.
```

### FEAT-LK-03 — Экспорт PDF “на консультацию”

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-LK-03 по техспеке: docs/generated/tech-specs/FEAT-LK-03.md

Зависимости:
- FEAT-LK-02 завершён.

DoD:
- Экспорт формирует PDF по правилам приватности (без лишнего), работает стабильно.
```

### FEAT-LK-04 — Управление данными: экспорт/удаление/отзыв

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-LK-04 по техспеке: docs/generated/tech-specs/FEAT-LK-04.md

Зависимости:
- FEAT-PLT-03 завершён.

DoD:
- Клиент может запросить экспорт/удаление/отзыв согласий; всё логируется и безопасно.
```

---

## Фаза 6: Admin Panel (Weeks 11–13)

### Week 11

#### FEAT-ADM-01 — Админка: дашборд + доступы

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-ADM-01 по техспеке: docs/generated/tech-specs/FEAT-ADM-01.md

Зависимости:
- FEAT-PLT-03 завершён.
Референс:
- docs/Admin-Panel-Specification.md

DoD:
- Админка доступна только нужным ролям; есть базовый дашборд/навигация.
```

#### FEAT-ADM-02 — Админка: расписание/слоты/исключения

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-ADM-02 по техспеке: docs/generated/tech-specs/FEAT-ADM-02.md

Зависимости:
- FEAT-BKG-02 завершён.

DoD:
- Психолог управляет расписанием/исключениями; изменения корректно влияют на слоты.
```

### Week 12

#### FEAT-ADM-03 — Админка: управление интерактивами

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-ADM-03 по техспеке: docs/generated/tech-specs/FEAT-ADM-03.md

Зависимости:
- FEAT-INT-01 завершён.

Цель интеграции:
- Подключить редактирование текстов/порогов/библиотек для FEAT-INT-02/04/05 без перелопачивания домена.

DoD:
- Редактирование интерактивов работает, права соблюдены, аудит/логирование по спекам.
```

#### FEAT-ADM-04 — Админка: CRM лиды + воронка статусов

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-ADM-04 по техспеке: docs/generated/tech-specs/FEAT-ADM-04.md

Зависимости:
- FEAT-PLT-02 завершён.

DoD:
- Лиды отображаются/обновляются по воронке; действия логируются; есть базовые фильтры.
```

### Week 13

#### FEAT-ADM-05 — Админка: модерация UGC

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-ADM-05 по техспеке: docs/generated/tech-specs/FEAT-ADM-05.md

Зависимости:
- FEAT-MOD-01 должен быть реализован (или реализуй контракты/заглушки строго по техспеке, если предусмотрено).

DoD:
- Модератор видит очередь, статусы, шаблоны; доступ и аудит корректны.
```

#### FEAT-ADM-06 — Админка: базовая аналитика (дашборд KPI)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-ADM-06 по техспеке: docs/generated/tech-specs/FEAT-ADM-06.md

Зависимости:
- FEAT-AN-01 должен быть реализован (события/витрины).

DoD:
- KPI дашборд работает и не нарушает privacy (только агрегаты).
```

---

## Фаза 7: UGC Moderation (Week 14)

### FEAT-MOD-01 — “Анонимный вопрос” + анти‑PII + кризис

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-MOD-01 по техспеке: docs/generated/tech-specs/FEAT-MOD-01.md

Зависимости:
- FEAT-PLT-02 завершён, FEAT-INT-06 завершён.
Референс:
- docs/UGC-Moderation-Rules.md

Guardrails:
- PII-фильтры, кризис‑флаги, безопасные шаблоны ответов.

DoD:
- Пользователь может отправить вопрос; он безопасно обрабатывается/маркируется; нет утечек текста в аналитику.
```

### FEAT-MOD-02 — Очередь модерации + SLA + аудит

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-MOD-02 по техспеке: docs/generated/tech-specs/FEAT-MOD-02.md

Зависимости:
- FEAT-ADM-05 и FEAT-PLT-05 завершены.

DoD:
- Очередь работает по SLA; все действия модератора аудируются; есть тесты на негативные сценарии.
```

---

## Фаза 8: Analytics & Security (Week 15)

### FEAT-AN-01 — Реализация Tracking Plan

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-AN-01 по техспеке: docs/generated/tech-specs/FEAT-AN-01.md

Зависимости:
- FEAT-PLT-02 завершён.
Референс:
- docs/Tracking-Plan.md

DoD:
- События подключены строго по словарю; запреты соблюдены; есть проверки, что PII/тексты не утекают.
```

### FEAT-AN-02 — Серверные “истинные” события

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-AN-02 по техспеке: docs/generated/tech-specs/FEAT-AN-02.md

Зависимости:
- FEAT-PAY-02 и FEAT-BKG-02 завершены.

DoD:
- Истинные события формируются на сервере (оплата/подтверждение/встречи) и склеиваются по deep_link_id без PII.
```

### FEAT-AN-03 — Логи/трейсы/алерты

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-AN-03 по техспеке: docs/generated/tech-specs/FEAT-AN-03.md

Зависимости:
- FEAT-PLT-01 завершён.

DoD:
- Есть наблюдаемость критичных флоу (booking/payments/sync/webhooks), алерты на сбои, без утечек данных.
```

### FEAT-SEC-01 — Раздельные согласия + управление

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-SEC-01 по техспеке: docs/generated/tech-specs/FEAT-SEC-01.md

Зависимости:
- FEAT-PLT-03 завершён.

DoD:
- Согласия раздельные, управляемые; состояние согласий учитывается во флоу и логируется.
```

### FEAT-SEC-02 — Шифрование P2 payload

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-SEC-02 по техспеке: docs/generated/tech-specs/FEAT-SEC-02.md

Зависимости:
- FEAT-PLT-02 завершён.

Guardrails:
- Шифровать P2 (анкеты/дневники/UGC тексты) “в покое” и по правилам спеки.

DoD:
- P2 хранится шифрованно; ключи управляются безопасно; есть тесты на (де)шифрование и доступ.
```

### FEAT-SEC-03 — Права доступа + аудит (дополнение)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-SEC-03 по техспеке: docs/generated/tech-specs/FEAT-SEC-03.md

Зависимости:
- FEAT-PLT-05 завершён.

DoD:
- Доступ к критичным операциям защищён; аудит‑лог дополняется нужными событиями; тесты есть.
```

---

## Фаза 9: Accessibility (Week 16)

### FEAT-A11Y-01 — WCAG 2.2 AA для интерактивов/booking (slices)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-A11Y-01 по техспеке: docs/generated/tech-specs/FEAT-A11Y-01.md

Зависимости:
- FEAT-WEB-01, FEAT-BKG-03 и все FEAT-INT-* должны быть реализованы.

Важно:
- Это кросс‑срез. Следуй slice‑плану из техспеки (если он есть) и не расползайся по scope.

DoD:
- Критичные сценарии проходят WCAG 2.2 AA: клавиатура, фокус, семантика, контраст; есть a11y-smoke проверки.
```

---

## Post‑Release: Backlog P1 (Release 1.x / Release 2)

> Порядок P1 зависит от метрик (см. `docs/Roadmap-Backlog.md` и `docs/Roadmap-P1-Activities.md`). Ниже — промпты на каждую P1‑техспеку.

### FEAT-AN-11 — Детальная аналитика интерактивов

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-AN-11 по техспеке: docs/generated/tech-specs/FEAT-AN-11.md

Предусловия:
- Базовый трекинг (FEAT-AN-01/02) уже в проде и валиден по privacy.

DoD:
- Аналитика углублена без утечек PII/текстов; агрегаты/воронки по спекам; есть верификация корректности данных.
```

### FEAT-INT-11 — Визуальный редактор NAV (slices)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-INT-11 по техспеке: docs/generated/tech-specs/FEAT-INT-11.md

Предусловия:
- Навигатор (FEAT-INT-03) уже используется; есть потребность в удобном редактировании.

Важно:
- Фича сложная — следуй slice‑плану из техспеки.

DoD:
- Визуальный редактор позволяет безопасно править структуру NAV и не ломает существующие сценарии.
```

### FEAT-WEB-11 — Улучшения конверсии главной/CTA

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-WEB-11 по техспеке: docs/generated/tech-specs/FEAT-WEB-11.md

Предусловия:
- Есть метрики по конверсии (booking/tg/quiz completion).

DoD:
- Улучшения не ломают UX/A11y; события измеримости настроены; изменения обратимы (feature flags, если указано).
```

### FEAT-BKG-11 — Улучшение “нет слотов” (авто‑альтернативы)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-BKG-11 по техспеке: docs/generated/tech-specs/FEAT-BKG-11.md

Предусловия:
- Базовый поток “нет слотов” (FEAT-BKG-05) уже работает.

DoD:
- Пользователь получает разумные альтернативы; логика корректна и не создаёт конфликтов/гонок.
```

---

## Post‑Release: Backlog P2 (опционально)

### FEAT-AB-01 — A/B инфраструктура

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-AB-01 по техспеке: docs/generated/tech-specs/FEAT-AB-01.md

Предусловия:
- Базовая аналитика и события уже стабильны.

DoD:
- Feature flags/рандомизация/сбор метрик работают; privacy guardrails соблюдены.
```

### FEAT-AI-01 — AI‑агенты (обязательно slices/этапы)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-AI-01 по техспеке: docs/generated/tech-specs/FEAT-AI-01.md

Важно:
- Фича потенциально >270k контекста — следуй строго slice/этапам из техспеки.
- Приоритет: safety/privacy/юридические ограничения и контроль рисков.

DoD:
- Реализованы только разрешённые сценарии; безопасность и приватность подтверждены тестами/проверками.
```

### FEAT-MOB-01 — Mobile‑admin (ограниченная)

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-MOB-01 по техспеке: docs/generated/tech-specs/FEAT-MOB-01.md

Предусловия:
- Основная админка (FEAT-ADM-*) стабильна.

DoD:
- Мобильная админка покрывает заявленный минимум, не ломает RBAC и аудит.
```

### FEAT-RET-99 — Агрессивные retention‑механики

```text
Ты — Cursor Agent.
Задача: реализовать FEAT-RET-99 по техспеке: docs/generated/tech-specs/FEAT-RET-99.md

Предусловия:
- Есть решение, что механики не конфликтуют с позиционированием и этикой.

DoD:
- Механики реализованы ограниченно и измеримо; легко отключаются; не нарушают тон/доверие/приватность.
```

