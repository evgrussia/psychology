# User flows / CJM (Release 1)

**Проект:** «Эмоциональный баланс»  
**Версия:** v0.1 (draft)  
**Дата:** 2026-01-06  
**Основано на:** `docs/PRD.md`, `docs/User-Stories-JTBD-Acceptance-Criteria.md`, исследования `docs/research/01–13`  

## 0) Зачем этот документ
Этот документ описывает **путь пользователя (CJM / user flows)**: от первого касания до записи/оплаты и возвращаемости. Он нужен, чтобы **найти “дыры” и точки отказа** до дизайна/кода и заранее заложить альтернативные пути (план Б).

**Как читать вместе со stories:** ниже сценарии идут в логике ключевых EPIC/US из `docs/User-Stories-JTBD-Acceptance-Criteria.md`. В каждом флоу указаны:
- **связанные US/EPIC** (трассировка),
- **основные шаги**,
- **альтернативы**,
- **точки отказа** и “ремонтные петли”,
- **минимальные события аналитики** (без чувствительных текстов).

## 1) Роли и принципы, влияющие на все флоу
**Роли**: гость → пользователь → клиент (см. термины в `docs/User-Stories-JTBD-Acceptance-Criteria.md`).

**Принципы (must-have):**
- **Time-to-benefit 1–3 минуты** на критичных входах (главная/лендинги/статьи/интерактивы).
- **Доверие на каждой ключевой странице**: “как проходит консультация”, границы/конфиденциальность, FAQ, “если не подойду — скажу честно”.
- **Privacy by design**: интерактивы без обязательного контакта; раздельные согласия; минимум данных (см. `docs/research/10-*`).
- **Кризисный режим**: при триггерах показываем экстренную помощь и **не** делаем “прогрев” главным действием (см. `docs/research/01-*`, `04-*`).

## 2) Карта входов (entry points) и “первый полезный шаг”
**Типовые входы (research `02-*`, `03-*`, `06-*`):**
- **SEO**: запрос-боль → лендинг темы → упражнение/тест → Telegram-план или запись.
- **Telegram/соцсети**: пост/ссылка → deep link на ресурс/интерактив → продолжение → запись.
- **Рекомендация**: сразу “О психологе”/“как проходит” → услуги → запись.
- **Возврат**: сохранённый ресурс/план/дневник → повторная польза → запись.

## 3) North Star CJM (сквозной путь) — от визита до записи/возврата
| Этап | Цель пользователя | Типовые действия | Touchpoints | Точки отказа (почему уходят) | “Ремонтная петля” (что делаем) |
|---|---|---|---|---|---|
| 1. Вход | “мне нужно облегчение/ясность” | клик из поиска/ТГ/ссылки | главная / лендинг темы / статья | не ясно “куда я попал(а)”, слишком много текста | быстрый выбор состояния + “с чего начать” (US-HP-01/02) |
| 2. Первая польза | снизить напряжение за 1–10 минут | упражнение/мини-диагностика | ресурс / интерактив | нет ощущения пользы, “слишком сложно”, страшно | план Б: “другой вариант”, объяснение времени/ожиданий (US-INT-03) |
| 3. Доверие | понять “безопасно ли здесь” | читаю “как проходит”, FAQ, границы | доверительные блоки | страх давления/осуждения, страх за данные | этика/границы/приватность + “можно остановиться” + ссылки на документы (EPIC E, EPIC K) |
| 4. Выбор следующего шага | решить “что дальше” | Telegram / запись / сохранить | CTA-блоки | “не готов(а)”, “дорого”, “нет времени” | альтернатива: Telegram-план/ресурс без контакта или с мягким контактом (EPIC H) |
| 5. Запись | выбрать услугу и слот | booking flow | запись/календарь | нет слотов, конфликт слота, форма длинная | лист ожидания / консьерж TG / короткая анкета (EPIC F) |
| 6. Оплата | безопасно оплатить | платёж | ЮKassa | ошибка оплаты, недоверие к правилам | прозрачный summary + бережная ошибка + повтор/альтернатива (EPIC G) |
| 7. Подготовка | спокойно дождаться встречи | читаю инструкции | письмо/уведомления/ЛК | забыли/неясно где ссылка/адрес | подтверждение + напоминания 24ч/1ч + “как подготовиться” (EPIC H2) |
| 8. Возврат/процесс | чувствовать опору между встречами | дневники/материалы | ЛК/Telegram | нет “причины вернуться” | дневники 30–90 сек + экспорт PDF + планы/челленджи (EPIC I, EPIC H) |

## 4) Флоу 1 — Быстрый старт: “выбрать состояние → первый шаг” (главная)
**Трассировка:** EPIC A (US-HP-01, US-HP-02, US-HP-03), EPIC D (US-INT-03).

### Основной путь (happy path)
1) Пользователь попадает на **главную**.  
2) Выбирает **карточку состояния** (тревога/выгорание/отношения/самооценка/границы).  
3) Видит “первый шаг”: **упражнение/мини-диагностика/ресурс** с временем (“~60 сек”, “~3–5 минут”).  
4) После результата/завершения: разветвление CTA:
   - **Telegram**: “получить план/сохранить/напоминание” (объяснённая польза).
   - **Запись**: “что будет на первой встрече” + вход в booking.

### Альтернативы
- Если “не хочу выбирать тему”: **“С чего начать” → выбрать формат** (упражнение/тест/статья).
- Если “не подходит упражнение”: кнопка **“другой вариант”** (US-INT-03).
- Если “хочу понять про специалиста”: переход в **“О психологе” / “Как проходит”** (EPIC E).

### Точки отказа и что закладываем в UX
- **Слишком тяжело выбирать** → дефолтный “самый мягкий” шаг (дыхание/заземление) + “можно просто посмотреть”.
- **Стыд/страх оценки** → фразы автономии: “темп выбираете вы”, “можно без контакта”.
- **Кризисные сигналы** → показать экстренную помощь и убрать “продающий” акцент (US-HP-03).

### События (минимум)
`view_problem_card`, `start_quiz` (если тест), `first_step_started`, `first_step_completed`, `cta_tg_click`, `booking_start`, `crisis_banner_shown`.

## 4.1) Флоу 1a — Уникальный быстрый старт: “Навигатор состояния → план”
**Трассировка:** EPIC A (US-HP-01..03), EPIC D (US-INT-*), EPIC H (US-TG-01).

### Основной путь
1) Пользователь открывает **Навигатор состояния** (с главной или `/start/`).  
2) Проходит 6–10 шагов выбора (без обязательного текста).  
3) Получает результат: “профиль/ориентир” + шаги “сейчас” + план на неделю.  
4) Выбирает следующий шаг:
   - Telegram: “сохранить план/напоминание”
   - Запись: “обсудить индивидуально” → booking

### Альтернативы
- “Не хочу отвечать/мне тяжело” → 1 мягкое упражнение (дыхание/заземление) без вопросов.
- “Хочу практику, не план” → мини‑ритуалы.

### Точки отказа
- **Слишком много шагов** → прогресс, “можно пропустить”, максимум 10 шагов.
- **Кризисные сигналы** → экстренная помощь и отключение “прогрева”.

### События
`navigator_start`, `navigator_step_completed`, `navigator_complete`, `cta_tg_click`, `booking_start`, `crisis_banner_shown`.

## 4.2) Флоу 1b — “Термометр ресурса → микро‑шаги → сохранить”
**Трассировка:** EPIC D, EPIC H.

### Основной путь
1) Пользователь открывает “Термометр ресурса”.  
2) Отмечает 3 шкалы (энергия/напряжение/поддержка).  
3) Получает рекомендации на “сейчас” + (опционально) план на 3 дня.  
4) Сохраняет в Telegram или в “избранное”.

### События
`resource_thermometer_start`, `resource_thermometer_complete`, `save_resource`/`favorites_add`, `cta_tg_click`.

## 4.3) Флоу 1c — “Скрипты границ → копирование → возврат”
**Трассировка:** EPIC D, EPIC C (контент), EPIC H.

### Основной путь
1) Открыть генератор “скриптов границ”.  
2) Выбрать сценарий + стиль + цель.  
3) Получить 3–6 вариантов фраз и “что делать, если давят”.  
4) Скопировать/сохранить.

### События
`boundaries_script_start`, `boundaries_script_variant_viewed`, `boundaries_script_copied`, `favorites_add`.

## 4.4) Флоу 1d — “Подготовка к первой консультации → запись”
**Трассировка:** EPIC D, EPIC F.

### Основной путь
1) Открыть “Подготовка к первой консультации”.  
2) Выбрать 5–7 пунктов (что хочу получить / что мешает / что пробовал(а)).  
3) Получить “черновик запроса” + чек‑лист “как проходит”.  
4) Нажать “Записаться” (или экспортировать/сохранить).

### События
`consultation_prep_start`, `consultation_prep_complete`, `consultation_prep_exported`, `booking_start`.

## 5) Флоу 2 — SEO: “запрос-боль → лендинг темы → первый шаг → CTA”
**Трассировка:** EPIC B (US-IA-01), EPIC C (US-CNT-01), EPIC E, EPIC D (если есть интерактив).

### Основной путь
1) Вход из поиска на **лендинг темы** (например, тревога/выгорание/отношения).  
2) Быстрое “я по адресу”: 3–5 признаков + нормализация + дисклеймер “не диагноз”.  
3) Блок **“попробовать сейчас”**: ресурс/упражнение/мини-диагностика.  
4) Доверие: “как проходит консультация”, границы/конфиденциальность, FAQ.  
5) CTA-разветвление:
   - “Записаться” (с ожиданиями: 50 мин, онлайн/офлайн, что будет дальше).
   - “Получить план/продолжение в Telegram”.

### Альтернативы
- Пользователь “не готов(а)”: **сохранить ресурс** (в Telegram или “просто сохранить ссылку” на сайте, если добавим).
- “Хочу глубже понять”: переход на pillar-статью/поддерживающие статьи (research `03-*`).

### Точки отказа
- **Много текста до пользы** → “первый шаг” поднимаем выше.
- **Не хватает доверия** → фиксированная “полоса доверия” + лёгкий доступ к “как проходит” и приватности.
- **Страх “меня лечат/диагностируют”** → единый дисклеймер и формулировки “ориентир”.

### События
`view_problem_landing`, `save_resource`, `start_quiz/complete_quiz` (если есть), `cta_tg_click`, `booking_start`, `faq_opened`.

## 6) Флоу 3 — Контент: “статья/ресурс → польза → сохранить/продолжить”
**Трассировка:** EPIC C (US-CNT-01/02), EPIC H (US-TG-01).

### Основной путь
1) Пользователь читает статью или открывает ресурс.  
2) На странице всегда есть блок **“попробовать сейчас”** (упражнение/аудио/чек-лист).  
3) После выполнения:
   - “Сохранить/получить напоминание в Telegram”
   - “Обсудить на встрече” → booking

### Альтернативы
- “Пока не хочу Telegram” → оставить без подписки, но предложить “сохранить” (если делаем избранное/копию ссылки).
- “Хочу тихий формат” → дневники/ЛК (если уже клиент) или тизер дневников как ценность.

### Точки отказа
- **Слишком “теоретично”** → блок практики обязателен.
- **Недоверие к автору** → E‑E‑A‑T блок: кто автор/подход/границы (research `03-*`, `07-*`).

### События
`save_resource`, `cta_tg_click`, `booking_start`, `trust_block_viewed`.

## 7) Флоу 4 — Интерактив: “мини‑диагностика → результат → план/запись”
**Трассировка:** EPIC D (US-INT-01/02), EPIC A (US-HP-03), EPIC H (US-TG-01).

### Основной путь
1) Превью квиза: время, цель, дисклеймеры.  
2) 5–10 вопросов (без клинического языка).  
3) Результат: уровень (низкий/умеренный/высокий) + шаги “сейчас” и “на неделю” + “когда стоит обратиться”.  
4) CTA:
   - Telegram: “получить план на 7 дней”
   - Запись: “разобрать индивидуально”

### Альтернативы
- “Не хочу отвечать на вопросы” → генератор “первый шаг” (упражнение без теста).
- “Хочу другой вариант” → 1–2 альтернативных ресурса по теме.

### Точки отказа
- **Кризис/опасность** → экстренная помощь + ограничение советов (без “психотерапии в интерфейсе”).
- **Слишком личные вопросы** → избегать текста в MVP; если есть текст — фильтры/модерация и минимизация хранения (research `04-*`, `10-*`).

### События
`start_quiz`, `complete_quiz` (только уровень результата), `cta_tg_click`, `booking_start`, `crisis_banner_shown`.

## 8) Флоу 5 — Доверие/выбор специалиста: “подойдёт ли психолог?”
**Трассировка:** EPIC E (US-TRUST-01/02/03).

### Основной путь
1) Пользователь открывает “О психологе”/“Как проходит консультация”.  
2) Смотрит: подход простыми словами, образование, этика/границы, “кому подойдёт / кому не подойдёт”, FAQ.  
3) Переходит к услугам и стартует запись.

### Альтернативы
- “Сомневаюсь” → предложить безопасный вход: 1 ресурс/квиз + Telegram-план.
- “Не подойдёт” → корректная рекомендация “куда лучше обратиться” (не теряем доверие).

### Точки отказа
- **Нет прозрачности процесса/границ** → делаем это первыми блоками.
- **Страх за данные** → краткая “как храним/что не храним” + ссылки на документы (EPIC K).

### События
`trust_block_viewed`, `faq_opened`, `booking_start`.

## 9) Флоу 6 — Запись (booking): услуга → слот → анкета → согласия → оплата → подтверждение
**Трассировка:** EPIC F (US-BKG-01..07), EPIC G (US-PAY-01/02), EPIC H2 (US-NOTIF-01/02), EPIC K (US-COM-01/02).

### Вариант A (self-serve) — основной
1) `booking_start` → выбор **услуги** (карточки: для кого/длительность/формат/правила/что будет).  
2) Выбор формата (онлайн/офлайн) + таймзона.  
3) Выбор слота в календаре:
   - если слот выбран → summary (дата/время/таймзона).
4) Короткая анкета (5–8, без клиники; минимальные обязательные).  
5) Согласия (раздельно) + ссылки на документы.  
6) Оплата/депозит (ЮKassa).  
7) Экран “Вы записаны” + письмо/уведомление + напоминания 24ч/1ч.

### Вариант B (консьерж/нет слотов) — обязательный план Б
Триггеры:
- “нет слотов” на диапазон,
- пользователь застрял/сомневается,
- конфликт брони.

Поток:
1) Показать “нет слотов” + варианты:
   - **лист ожидания** (контакт + согласие на коммуникации),
   - **Telegram‑консьерж** (3–5 сервисных вопросов → предложить 2–3 окна или ссылку).

### Критичные точки отказа (и что предусмотреть)
- **Нет слотов** → не “тупик”: лист ожидания + консьерж; прозрачность “когда отвечу/что будет дальше”.
- **Конфликт слота** → честное сообщение + быстрый выбор нового слота/лист ожидания.
- **Длинная анкета** → ограничение (≤8) + подсказки “можно кратко”.
- **Согласия/документы неясны** → рядом с чекбоксами, коротко, с ссылками (не “юридический лес”).
- **Оплата не прошла** → бережная ошибка + повтор/другой способ/контакт поддержки.
- **18+** → явно на сценариях записи/анкеты; для <18 — бережная развилка без сбора лишних данных.

### События
`booking_start`, `service_selected`, `booking_slot_selected`, `show_no_slots`, `waitlist_submitted`, `booking_conflict`, `intake_started`, `intake_submitted`, `payment_started`, `payment_failed`, `booking_paid`, `booking_confirmed`.

## 10) Флоу 7 — Telegram: “получить план/сохранить/челлендж/консьерж”
**Трассировка:** EPIC H (US-TG-01..03), EPIC C/D/F (как источники).

### Основной путь: сайт → Telegram по deep link
1) Пользователь нажимает “получить план/сохранить” → открывается Telegram с **конкретным действием**, а не “главной” (deep link).  
2) Онбординг 30–60 сек: тема → цель → частота → выдача первого ресурса.  
3) Серия (3–7 сообщений) или челлендж (7 дней).  
4) Мягкий CTA к записи (после полезности, не “давить”).

### Альтернативы
- “Тихий режим”: частота “только по запросу”.
- “Стоп/отписаться”: очевидная команда/кнопка.
- “Консьерж записи”: сервисные вопросы → ссылка на booking/слоты.

### Точки отказа
- **Слишком общий переход** (без deep link) → потеря контекста → обязательно параметризуем CTA.
- **Спам/частота** → настройка частоты + лёгкая отписка.
- **Риск чувствительных данных** → в TG не спрашиваем “про терапию”, только сервис/навигация.

### События (на стороне продукта по возможности)
`cta_tg_click`, `tg_subscribe_confirmed`, `tg_onboarding_completed`, `tg_series_stopped`, `booking_start` (из TG, по UTM).

## 11) Флоу 8 — ЛК клиента: встречи, дневники, экспорт, управление данными
**Трассировка:** EPIC I (US-LK-01..04), EPIC K (приватность).

### Основной путь
1) Клиент входит в ЛК и видит: предстоящие/прошедшие встречи + материалы.  
2) Заполняет дневник (30–90 сек), при необходимости удаляет записи.  
3) Экспорт PDF на встречу.  
4) Управление данными: скачать/удалить/отозвать согласия.

### Точки отказа
- **“Не хочу ничего хранить”** → видимое удаление и контроль данных.
- **Слишком сложно вести дневник** → минимальные поля + “1 пункт уже достаточно”.

### События (минимум)
`lk_opened`, `diary_entry_created`, `diary_entry_deleted`, `pdf_exported`, `consent_updated`, `account_deleted`.

## 12) Флоу 9 — Мероприятия: “вебинар/практика → регистрация → материалы → следующий шаг”
**Трассировка:** EPIC I2 (US-EVT-01/02), связка с TG (EPIC H).

### Основной путь
1) Лендинг мероприятия → регистрация (с отдельным согласием на коммуникации).  
2) Подтверждение + напоминания + материалы (через сайт/почту/TG).  
3) После события: “следующий шаг” (ресурс/TG/запись).

### Точки отказа
- **Непонятные правила/возвраты/доступ к записи** → фиксируем на лендинге.
- **Риск “индивидуальной терапии в группе”** → правила и модерация, дисклеймеры.

### События
`event_viewed`, `event_registered`, `event_attended` (если можно), `event_materials_opened`, `booking_start`.

## 13) Сквозной “Кризисный режим” (перекрывает все сценарии)
**Трассировка:** US-HP-03, research `01-*`, `04-*`, `10-*`.

**Триггеры:** признаки самоповреждения/суицидальных мыслей/насилия/угрозы (особенно при текстовом вводе).  
**Поведение системы:**
- показываем **экстренную помощь** (112 минимум + варианты),
- **не** делаем запись/Telegram главным CTA (можно оставить вторичным “если вы в безопасности”),
- не сохраняем чувствительные тексты; события — агрегированные (`crisis_banner_shown`).

## 14) “Дыры” и контрольный список перед дизайном/кодом
Ниже — список мест, где чаще всего “рвётся” путь, и что нужно явно решить/спроектировать (как минимум на уровне UX/контента).

- **Единый первый шаг на всех входах**: на главной/лендингах/статьях всегда есть “попробовать сейчас” + понятное время.
- **Единые доверительные блоки**: “как проходит”, “границы/приватность”, FAQ — доступны из всех критичных экранов.
- **Единый язык про тесты**: “ориентир, не диагноз”, без клиники; уровни результата унифицированы (research `04-*`).
- **Нет слотов = не тупик**: лист ожидания + TG‑консьерж (что именно спрашиваем? как быстро отвечаем?).
- **Оплата**: как объясняем депозит/отмены; что показываем при ошибке; контакт поддержки.
- **18+**: где именно спрашиваем/показываем; что делаем при <18 (без сбора лишних данных).
- **Telegram**: точная схема (канал/бот/гибрид) и подтверждение `tg_subscribe_confirmed`.
- **Согласия/документы**: тексты чекбоксов, ссылки рядом, “не юридический лес” (research `10-*`).

