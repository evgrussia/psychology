# User Stories / JTBD + Acceptance Criteria (Release 1)

**Проект:** «Эмоциональный баланс»  
**Версия:** v0.1 (draft)  
**Дата:** 2026-01-06  
**Основано на:** `docs/PRD.md` + исследования `docs/research/01–13`  

## 0) Зачем этот документ
PRD фиксирует требования и границы, а этот документ переводит их в **проверяемые сценарии**: чтобы “готово” можно было измерить тестами, аналитикой и проверкой UX.

**Связанный документ:** после user stories см. [User flows / CJM (пути пользователя)](./user-flows-cjm.md) — сквозные пути, развилки, альтернативы и точки отказа.

## 1) Термины и роли
- **Гость**: пользователь без авторизации.
- **Пользователь**: может быть гостем или авторизованным.
- **Клиент**: авторизованный пользователь, у которого есть запись/покупка/материалы.
- **Лид**: контакт/событие, которое попадает в CRM (в т.ч. waitlist, TG-онбординг, booking).
- **Админ (owner)**: психолог.
- **Админ (assistant)**: ассистент (ограниченный доступ).
- **Контент‑редактор**: управляет контентом без доступа к клиентским данным.

## 2) Принципы “Definition of Done” (общие)
- **Тон и безопасность**: эмпатично, без давления, без “диагнозов/лечения/гарантий” (см. `docs/PRD.md` NFR‑TOV и `docs/research/03-*`).
- **Privacy by design**: минимум данных; интерактивы без обязательного контакта; раздельные согласия; управление данными в ЛК (см. `docs/research/10-*`).
- **Кризисный режим**: при признаках кризиса — экстренный блок и отказ от “прогрева” (см. `docs/research/01-*` и `docs/PRD.md` FR‑INT‑4).
- **Событийная аналитика**: ключевые события без чувствительного текста (см. `docs/PRD.md` NFR‑AN‑1/2).

## 3) JTBD: основные “работы” (сводка)
Сегменты и JTBD-рамка: см. `docs/research/02-Audience-Personas-JTBD.md`.

Мы используем один формат для трассировки:
- **JTBD**: When / I want / So I can
- **User Story**: Как (роль), я хочу (цель), чтобы (ценность)
- **Acceptance Criteria**: Given / When / Then
- **Трассировка**: ссылка на FR/NFR/ресерч (если есть)
- **События**: минимум аналитики (если применимо)

---

## EPIC A — Быстрый старт на сайте (главная, навигация, “путь клиента”)

### US-HP-01 — Выбрать “состояние” и начать с маленького шага
- **JTBD**: When мне тяжело прямо сейчас, I want быстро выбрать подходящую тему, So I can получить пользу за 1–3 минуты без стыда.
- **User Story**: Как гость, я хочу выбрать “что мне сейчас ближе” (тревога/выгорание/отношения/…), чтобы сразу получить первый безопасный шаг.
- **Acceptance Criteria**
  - **Given** я на главной, **When** нажимаю карточку состояния, **Then** попадаю на страницу/модуль, где есть первый шаг (тест/упражнение/ресурс) и ясно, сколько это займёт времени.
  - **Given** я на главной, **When** я не хочу выбирать тему, **Then** я могу перейти в “С чего начать” и выбрать формат (упражнение/тест/статья).
  - **Given** я в любом из стартовых модулей, **Then** видно “не диагноз” и “не экстренная помощь” (кратко).
- **Трассировка**: PRD `FR-HP-1..4`, research `01-*` (IA/паттерны), `11-*` (CTA)
- **События**: `view_problem_card`, `start_quiz` (если выбран тест), `save_resource`, `cta_tg_click`, `booking_start`

### US-HP-02 — Дойти до ключевых разделов ≤ 3 клика
- **JTBD**: When я на сайте впервые, I want быстро найти “запись / о психологе / первый шаг”, So I can не потеряться.
- **User Story**: Как гость, я хочу за ≤3 клика перейти к интерактиву/записи/странице доверия, чтобы не тратить силы на поиск.
- **Acceptance Criteria**
  - **Given** я на главной, **When** я ищу “запись”, **Then** кнопка “Запись” доступна в шапке и ведёт в флоу записи.
  - **Given** я на главной, **When** я ищу “о психологе / как проходит консультация”, **Then** я нахожу эти пункты в меню/видимых блоках и перехожу на соответствующие страницы.
- **Трассировка**: PRD `FR-HP` acceptance criteria, research `01-*` (навигация)
- **События**: `booking_start`, `trust_block_viewed`

### US-HP-03 — Всегда иметь безопасный путь “экстренная помощь”
- **JTBD**: When я вижу, что мне небезопасно, I want быстро получить контакты экстренной помощи, So I can не оставаться один(одна).
- **User Story**: Как пользователь, я хочу иметь доступ к “экстренной помощи” из критичных экранов, чтобы быстро найти безопасный следующий шаг.
- **Acceptance Criteria**
  - **Given** я на результате теста/квиза или в “анонимном вопросе”, **When** срабатывает кризисный триггер (по логике модуля), **Then** показывается блок экстренной помощи и **не** показываются “продающие” CTA как главный акцент.
  - **Given** я вижу блок экстренной помощи, **Then** он содержит понятное сообщение, кнопку/инструкцию “112” (минимум) и варианты “горячие линии / сказать близкому / вернуться к материалам”.
- **Трассировка**: PRD `FR-INT-4`, NFR ограничения, research `01-*` (Crisis Banner)
- **События**: `crisis_banner_shown` (рекомендуемое), `crisis_help_click`

---

## EPIC B — Каталог тем и SEO‑лендинги (“С чем я помогаю”)

### US-IA-01 — Найти тему и понять “что попробовать сейчас”
- **JTBD**: When я пришёл(пришла) из поиска по боли, I want быстро увидеть признаки и первый шаг, So I can проверить, что я “по адресу”.
- **User Story**: Как гость, я хочу открыть лендинг темы (тревога/выгорание/…), чтобы увидеть признаки, “что попробовать сейчас”, и понятный следующий шаг.
- **Acceptance Criteria**
  - **Given** я на лендинге темы, **Then** есть: бережное интро, 3–5 признаков без клиники, блок “попробовать сейчас”, “как я работаю с этим”, CTA записи и доверие (границы/конфиденциальность/FAQ).
  - **Given** я на лендинге темы, **When** я не готов(а) к записи, **Then** есть мягкая альтернатива: Telegram/ресурс без давления.
- **Трассировка**: PRD `FR-IA-1..3`, research `01-*` (паттерн “Проблема”), `03-*` (SEO/шаблоны)
- **События**: `view_problem_landing`, `cta_tg_click`, `booking_start`

---

## EPIC C — Контент (блог/ресурсы) как “первый шаг” и возвращаемость

### US-CNT-01 — Статья всегда предлагает “попробовать сейчас”
- **JTBD**: When я читаю статью, I want сразу увидеть маленькое упражнение, So I can получить пользу без длинной терапии.
- **User Story**: Как пользователь, я хочу, чтобы в каждой статье был блок “попробовать сейчас”, чтобы не оставаться только с теорией.
- **Acceptance Criteria**
  - **Given** я открыл(а) статью, **Then** на странице есть блок “попробовать сейчас” (упражнение/ресурс) и безопасный дисклеймер.
  - **Given** я на статье, **Then** есть CTA “сохранить/продолжить в Telegram” и CTA записи (объяснённые).
- **Трассировка**: PRD `FR-CNT-1..3`, research `03-*`, `11-*`
- **События**: `save_resource`, `cta_tg_click`, `booking_start`

### US-CNT-02 — Контент соответствует редполитике и запретам
- **JTBD**: When я читаю материалы психолога, I want видеть честный безопасный язык, So I can доверять и не чувствовать давления.
- **User Story**: Как владелец продукта, я хочу, чтобы контент автоматически проходил QA‑чеклист, чтобы не нарушать этику и закон.
- **Acceptance Criteria**
  - **Given** статья/ресурс публикуется, **Then** подтверждены пункты: нет “диагноз/лечим/гарантия”, есть дисклеймеры, есть CTA без давления, есть перелинковка.
- **Трассировка**: PRD `NFR-TOV-*`, research `03-*`, `08-*` (контент QA)

---

## EPIC D — Интерактивы (квизы/мини‑диагностики/“первый шаг”/дневники/анонимный вопрос)

### US-INT-01 — Пройти мини‑диагностику без контакта и получить результат
- **JTBD**: When мне тревожно/я на пределе, I want пройти короткий тест, So I can получить ориентир и 2–3 шага.
- **User Story**: Как гость, я хочу пройти мини‑диагностику без ввода контакта, чтобы получить результат и план действий.
- **Acceptance Criteria**
  - **Given** я запускаю тест, **Then** на старте явно написано: время, цель, “не диагноз”, “не экстренная помощь”.
  - **Given** я прошёл(прошла) вопросы, **Then** результат включает: уровень (низкий/умеренный/высокий), расшифровку, 2–3 шага “сейчас”, 2–3 шага “на неделю”, “когда стоит обратиться к специалисту”.
  - **Given** я получил(а) результат, **Then** я вижу CTA: “получить план в Telegram” и/или “записаться” с объяснением.
- **Трассировка**: PRD `FR-INT-1..5` + acceptance criteria, research `04-*` (паттерн квиза)
- **События**: `start_quiz`, `complete_quiz` (с уровнем результата без сырых ответов), `cta_tg_click`, `booking_start`

### US-INT-02 — “Высокий” уровень результата включает усиленную безопасность
- **JTBD**: When результат высокий, I want понять, что делать дальше безопасно, So I can не остаться один(одна).
- **User Story**: Как пользователь с высоким уровнем результата, я хочу увидеть понятные рекомендации и границы, чтобы принять решение о поддержке.
- **Acceptance Criteria**
  - **Given** уровень результата “высокий”, **Then** на экране есть: нормализация, “когда стоит обратиться к специалисту”, и ссылка/блок экстренной помощи (как минимум — доступная кнопка).
  - **Given** уровень результата “высокий”, **Then** формулировки избегают категоричных диагнозов и обещаний.
- **Трассировка**: PRD acceptance criteria для `FR-INT`, `NFR-TOV-*`, research `04-*`, `10-*`

### US-INT-03 — Генератор “Первый шаг” предлагает упражнение и план Б
- **JTBD**: When мне нужно облегчение сейчас, I want 1 упражнение + запасной вариант, So I can не застрять, если “не зашло”.
- **User Story**: Как пользователь, я хочу получить упражнение с таймером/аудио и кнопку “другой вариант”, чтобы подобрать подходящий первый шаг.
- **Acceptance Criteria**
  - **Given** я выбрал(а) состояние, **Then** я получаю карточку упражнения (инструкция + таймер/аудио, если есть) и кнопку “не подходит → другой вариант”.
  - **Given** я завершил(а) упражнение, **Then** мне предлагается “сохранить в Telegram” и/или “обсудить на встрече” без давления.
- **Трассировка**: research `04-*` (First Step Generator), `11-*` (компоненты)
- **События**: `first_step_started`, `first_step_completed`, `save_resource`, `cta_tg_click`

### US-INT-04 — “Анонимный вопрос” с правилами и модерацией
- **JTBD**: When мне стыдно/страшно, I want задать вопрос безопасно, So I can получить ориентир без риска.
- **User Story**: Как пользователь, я хочу отправить анонимный вопрос с понятными правилами, чтобы понимать ожидания и границы.
- **Acceptance Criteria**
  - **Given** я открыл(а) форму, **Then** вижу правила: не экстренная помощь, не медназначения, срок ответа, приватность/публикация только с разрешения.
  - **Given** я отправляю вопрос, **Then** система фильтрует явные PII (телефон/адрес) и при кризисных триггерах показывает экстренную помощь.
- **Трассировка**: research `04-*` (Анонимный вопрос), `10-*` (privacy/риски)
- **События**: `question_submitted`, `crisis_banner_shown`

### US-INT-05 — Навигатор состояния: пройти ветвящийся сценарий и получить план
- **JTBD**: When мне тяжело и сложно сформулировать словами, I want пройти короткий навигатор выборами, So I can получить следующий шаг без стыда и без “диагнозов”.
- **User Story**: Как гость, я хочу пройти навигатор состояния (6–10 шагов) без обязательного текста и контакта, чтобы получить ориентир, шаги “сейчас” и план на неделю.
- **Acceptance Criteria**
  - **Given** я открываю навигатор, **Then** вижу: время (“~2–3 минуты”), цель (“ориентир”), дисклеймер “не диагноз / не экстренная помощь”, кнопку “начать”.
  - **Given** я прохожу навигатор, **Then** шаги состоят из выбора 2–3 вариантов и не требуют свободного текста для получения результата.
  - **Given** я дошёл(дошла) до результата, **Then** я вижу: “что сейчас важнее всего” (профиль/ориентир), 2–3 шага “сейчас”, 2–3 шага “на неделю”, “когда стоит обратиться”, CTA Telegram/запись.
  - **Given** срабатывает кризисный триггер (по логике вариантов), **Then** показывается экстренная помощь, а “продающие” CTA не являются главным действием.
- **Трассировка**: PRD `FR-INT-1..7`, `FR-INT-4`, NFR privacy; research `04-*` (навигатор), `13-*` (уникальные активности)
- **События**: `navigator_start`, `navigator_step_completed`, `navigator_complete`, `cta_tg_click`, `booking_start`, `crisis_banner_shown`

### US-INT-06 — «Термометр ресурса»: получить ресурсный ориентир и микро‑шаги
- **JTBD**: When я устал(а) и не понимаю, за что хвататься, I want быстро оценить ресурс, So I can выбрать один реалистичный шаг.
- **User Story**: Как пользователь, я хочу пройти “термометр ресурса” (энергия/напряжение/поддержка) и получить рекомендации, чтобы снизить нагрузку и вернуть опоры.
- **Acceptance Criteria**
  - **Given** я открываю термометр, **Then** интерфейс прост: 3 шкалы/выбора, без клинических вопросов и без необходимости регистрации.
  - **Given** я завершил(а), **Then** я вижу `resource_level` (low/moderate/high) + 2 шага “сейчас” (2 минуты и 10 минут) и ссылку на мини‑ритуалы/ресурсы.
  - **Given** я хочу вернуться к рекомендации, **Then** я могу сохранить (в избранное/Telegram) без передачи чувствительных значений шкал в аналитику.
- **Трассировка**: PRD `FR-INT-6/7`, NFR privacy; research `04-*` (термометр), `13-*`
- **События**: `resource_thermometer_start`, `resource_thermometer_complete`, `favorites_add` (опционально), `cta_tg_click`

### US-INT-07 — Генератор “скриптов границ”: подобрать фразы и скопировать/сохранить
- **JTBD**: When мне нужно сказать “нет” или попросить о помощи, I want получить несколько вариантов фраз, So I can действовать увереннее.
- **User Story**: Как пользователь, я хочу выбрать ситуацию/тон/цель и получить готовые фразы, чтобы скопировать или сохранить их для разговора.
- **Acceptance Criteria**
  - **Given** я открываю генератор, **Then** могу выбрать сценарий (работа/семья/партнёр/друзья), стиль (мягко/коротко/твёрдо) и цель (отказать/попросить/обозначить правило/пауза).
  - **Given** я получил(а) варианты, **Then** вижу 3–6 карточек фраз + блок “что делать, если давят”.
  - **Given** я нажимаю “Скопировать”, **Then** фраза копируется и показывается подтверждение “Скопировано.”; при этом **текст фразы не уходит в аналитику** (только `variant_id`).
  - **Given** пользователь выбирает сценарий, связанный с небезопасностью/насилием (если такие варианты есть), **Then** показывается блок безопасности/экстренной помощи.
- **Трассировка**: PRD `FR-INT-6/7`, NFR privacy; research `04-*` (скрипты), `13-*`
- **События**: `boundaries_script_start`, `boundaries_script_variant_viewed`, `boundaries_script_copied`, `favorites_add`

### US-INT-08 — «Подготовка к первой консультации»: собрать черновик запроса и перейти к записи
- **JTBD**: When я хочу записаться, но не знаю, как сформулировать, I want подготовить короткий запрос, So I can чувствовать себя спокойнее на первой встрече.
- **User Story**: Как пользователь, я хочу пройти конструктор запроса за 2–3 минуты и получить “черновик” + чек‑лист, чтобы записаться или сохранить.
- **Acceptance Criteria**
  - **Given** я открываю конструктор, **Then** вижу пояснение “можно без личных деталей”, и что свободный текст необязателен.
  - **Given** я прохожу шаги, **Then** большинство шагов — выбор из вариантов; если есть поле текста, оно помечено как “необязательно”.
  - **Given** я получил(а) результат, **Then** вижу “черновик запроса” (структура из 3–5 пунктов) + чек‑лист “как проходит первая встреча” + CTA “Записаться”.
  - **Given** я экспортирую результат (копия/PDF/Telegram), **Then** в аналитику отправляется только факт экспорта и тип (`export_target`), а не текст.
- **Трассировка**: PRD `FR-INT-6/7`, `FR-BKG-*`, NFR privacy; research `04-*` (prep), `13-*`
- **События**: `consultation_prep_start`, `consultation_prep_complete`, `consultation_prep_exported`, `booking_start`

### US-INT-09 — Мини‑ритуалы: запустить таймер и завершить практику
- **JTBD**: When мне нужно быстро “перезагрузиться”, I want короткий ритуал с таймером, So I can вернуться в контакт с собой за 2–5 минут.
- **User Story**: Как пользователь, я хочу выбрать мини‑ритуал и пройти его с таймером, чтобы получить лёгкую пользу и возможность вернуться.
- **Acceptance Criteria**
  - **Given** я открываю каталог мини‑ритуалов, **Then** вижу длительность (2–5 минут) и краткое “зачем”.
  - **Given** я запускаю ритуал, **Then** таймер доступен (старт/пауза/завершить) и есть подсказка “если стало хуже — остановитесь”.
  - **Given** я завершил(а), **Then** могу сохранить ритуал в избранное/Telegram (опционально).
- **Трассировка**: PRD `FR-INT-6`, NFR UX/A11y; research `04-*`, `13-*`
- **События**: `ritual_started`, `ritual_completed`, `favorites_add`, `cta_tg_click` (если “сохранить в TG”)

### US-INT-10 — Избранное/“аптечка”: сохранять и открывать свои опоры
- **JTBD**: When мне снова тяжело, I want быстро открыть сохранённые опоры, So I can не искать всё заново.
- **User Story**: Как пользователь, я хочу сохранять упражнения/ритуалы/скрипты в “избранное” и открывать список, чтобы возвращаться к ним.
- **Acceptance Criteria**
  - **Given** я нажимаю “сохранить” на ресурсе/ритуале/скрипте, **Then** элемент добавляется в избранное и показывается подтверждение “Сохранено.”.
  - **Given** я открываю “избранное”, **Then** вижу список сохранённых элементов и могу удалить любой из них.
  - **Given** список пуст, **Then** отображается пустое состояние с CTA “С чего начать” / “Мини‑ритуалы”.
  - **Given** мы храним избранное без аккаунта, **Then** оно хранится локально (localStorage) и в аналитике фиксируются только `entity_type` и `entity_id/slug`, без персональных данных.
- **Трассировка**: PRD `FR-INT-6`, NFR privacy; research `04-*`, `13-*`
- **События**: `favorites_add`, `favorites_remove`, `favorites_open`

---

## EPIC E — Доверие (профиль, “как проходит”, FAQ, отзывы/кейсы)

### US-TRUST-01 — Понять подход, границы и “кому подойдёт”
- **JTBD**: When я выбираю специалиста, I want увидеть подход и границы, So I can почувствовать безопасность и принять решение.
- **User Story**: Как гость, я хочу на странице “О психологе” увидеть подход простыми словами, квалификацию, кодекс/границы, “кому подхожу/не подхожу”, чтобы оценить совпадение.
- **Acceptance Criteria**
  - **Given** я на странице “О психологе”, **Then** есть разделы: подход простыми словами, образование/сертификаты, этика/границы, “подойдёт/не подойдёт”, FAQ.
  - **Given** я в блоке “не подойдёт”, **Then** есть корректная альтернатива (“куда лучше обратиться”) без давления и без обесценивания.
- **Трассировка**: PRD `FR-TRUST-1..3`, research `07-*`
- **События**: `trust_block_viewed`, `faq_opened`, `booking_start`

### US-TRUST-02 — Понять, “что будет на первой встрече”
- **JTBD**: When мне страшно идти в терапию, I want понять процесс, So I can снизить тревогу и записаться.
- **User Story**: Как пользователь, я хочу увидеть страницу/блок “как проходит консультация”, чтобы снизить неопределённость.
- **Acceptance Criteria**
  - **Given** я на ключевых страницах (главная/лендинг темы/услуга/результат квиза), **Then** доступна ссылка/блок “как проходит консультация”.
  - **Given** я открыл(а) “как проходит”, **Then** вижу шаги 1–2–3, длительность, формат, и поддержку “можно не рассказывать всё сразу”.
- **Трассировка**: PRD `FR-HP-3`, `FR-TRUST-2`, research `01-*`, `07-*`

### US-TRUST-03 — Отзывы публикуются только с согласием и анонимизацией
- **JTBD**: When я читаю отзывы, I want доверять, что они этичны, So I can не сомневаться в границах специалиста.
- **User Story**: Как владелец продукта, я хочу публиковать отзывы/кейсы только по правилам согласия и анонимизации, чтобы не нарушать этику и закон.
- **Acceptance Criteria**
  - **Given** отзыв публикуется, **Then** у него есть подтверждённое согласие и уровень анонимности; при отзыве согласия — отзыв снимается с публикации.
- **Трассировка**: PRD `FR-TRUST-3`, research `07-*`, `10-*`

---

## EPIC F — Запись (booking): выбор услуги → слот → анкета → согласия → оплата → подтверждение

### US-BKG-01 — Начать запись и выбрать услугу/формат
- **JTBD**: When я готов(а) к консультации, I want быстро выбрать услугу и формат, So I can перейти к выбору времени.
- **User Story**: Как гость, я хочу начать запись и выбрать услугу/формат (онлайн/офлайн), чтобы увидеть доступные слоты.
- **Acceptance Criteria**
  - **Given** я нажал(а) “Запись”, **Then** вижу выбор услуги (карточки с “для кого / длительность / формат / правила отмены / что будет”).
  - **Given** услуга допускает офлайн, **Then** явно указано “Москва, м. Черкизовская” и логистика (минимум).
- **Трассировка**: PRD `FR-BKG-1`, research `05-*` (карточки услуг)
- **События**: `booking_start`, `service_selected`

### US-BKG-02 — Календарь показывает слоты в таймзоне пользователя
- **JTBD**: When я выбираю время, I want видеть слоты в моей таймзоне, So I can не ошибиться.
- **User Story**: Как пользователь, я хочу, чтобы календарь автоматически показывал время в моей таймзоне, чтобы корректно выбрать слот.
- **Acceptance Criteria**
  - **Given** я открываю выбор слота, **Then** таймзона отображается и может быть изменена вручную.
  - **Given** я выбираю слот, **Then** в summary отображается дата/время и таймзона.
- **Трассировка**: PRD `FR-BKG-2`, research `05-*`
- **События**: `booking_slot_selected`

### US-BKG-03 — “Нет слотов” → лист ожидания/консьерж без давления
- **JTBD**: When нет мест, I want оставить контакт или перейти в Telegram, So I can не “обломаться”.
- **User Story**: Как пользователь, я хочу увидеть бережные варианты, если слотов нет, чтобы не застрять.
- **Acceptance Criteria**
  - **Given** на выбранный период нет слотов, **Then** есть вариант “лист ожидания” и/или “консьерж записи в Telegram” (без обсуждения терапии).
  - **Given** я оставляю контакт, **Then** я вижу отдельное согласие на коммуникации и ссылку на политику.
- **Трассировка**: PRD `FR-BKG-4`, `FR-TG-4`, research `05-*`, `06-*`, `10-*`
- **События**: `show_no_slots`, `waitlist_submitted`

### US-BKG-04 — Короткая анкета перед оплатой (5–8 вопросов)
- **JTBD**: When я записываюсь, I want ответить коротко и безопасно, So I can быть уверен(а), что меня встретят бережно.
- **User Story**: Как пользователь, я хочу заполнить короткую анкету без клинических вопросов, чтобы помочь психологу подготовиться.
- **Acceptance Criteria**
  - **Given** я дошёл(дошла) до анкеты, **Then** обязательных вопросов не больше 4, всего не больше 8; формулировки без стыда; можно отвечать кратко.
  - **Given** вопрос содержит текстовый ввод, **Then** рядом есть подсказка “можно кратко / как получается сейчас”.
- **Трассировка**: PRD `FR-BKG-1`, research `05-*`, `03-*` (тон)
- **События**: `intake_started`, `intake_submitted`

### US-BKG-05 — Согласия разделены и понятны
- **JTBD**: When я оставляю данные, I want понимать, на что соглашаюсь, So I can доверять.
- **User Story**: Как пользователь, я хочу видеть раздельные чекбоксы согласий, чтобы контролировать свои данные и коммуникации.
- **Acceptance Criteria**
  - **Given** я на шаге подтверждения/оплаты, **Then** есть обязательное согласие на обработку ПДн + отдельное (опциональное) согласие на коммуникации (Telegram/email).
  - **Given** я вижу согласия, **Then** рядом есть ссылки на документы (политика/оферта) и они открываются.
- **Трассировка**: PRD `NFR-PRIV-*`, research `10-*`

### US-BKG-06 — Защита от конфликтов бронирования (двойной клик на один слот)
- **JTBD**: When два человека выбирают один слот, I want получить честный ответ, So I can выбрать альтернативу.
- **User Story**: Как пользователь, я хочу, чтобы при конфликте брони мне показали бережное сообщение и альтернативы, чтобы не терять доверие.
- **Acceptance Criteria**
  - **Given** я подтверждаю запись на слот, **When** слот уже занят, **Then** я получаю сообщение “слот заняли” + варианты: выбрать другой слот / лист ожидания / Telegram‑консьерж.
- **Трассировка**: PRD `FR-BKG-7`
- **События**: `booking_conflict`

### US-BKG-07 — Подтверждение записи и инструкции
- **JTBD**: When я оплатил(а), I want сразу получить подтверждение и понятные шаги, So I can спокойно ждать встречи.
- **User Story**: Как пользователь, я хочу получить страницу “Вы записаны” и уведомление, чтобы знать что дальше.
- **Acceptance Criteria**
  - **Given** оплата успешна, **Then** я вижу экран подтверждения: время/таймзона, формат, правила отмены, что будет дальше, ссылка/адрес (если есть), и кнопка “добавить в календарь” (если предусмотрено).
  - **Given** запись создана, **Then** отправляется подтверждение (email минимум) и планируются напоминания 24ч/1ч.
- **Трассировка**: PRD `FR-BKG-5`, research `05-*`
- **События**: `booking_confirmed`

---

## EPIC G — Оплата (ЮKassa): статусы, ошибки, минимизация данных

### US-PAY-01 — Оплатить/внести депозит и получить прозрачное состояние
- **JTBD**: When я оплачиваю, I want понимать статус и правила, So I can не тревожиться из‑за денег.
- **User Story**: Как пользователь, я хочу оплатить услугу и увидеть понятный статус, чтобы завершить запись.
- **Acceptance Criteria**
  - **Given** я на экране оплаты, **Then** вижу сумму/депозит, правила отмены/переноса, и чекбоксы согласий.
  - **Given** платёж не удался, **Then** вижу бережное сообщение и варианты: повторить/другой способ/связаться.
- **Трассировка**: PRD `FR-PAY-1..3`, research `11-*` (микрокопи)
- **События**: `payment_started`, `payment_failed`, `booking_paid`

### US-PAY-02 — Продукт хранит минимум данных об оплате
- **JTBD**: When я плачу, I want чтобы мои платёжные данные были в безопасности, So I can доверять.
- **User Story**: Как владелец продукта, я хочу хранить только id/статус платежа, чтобы минимизировать риски.
- **Acceptance Criteria**
  - **Given** платёж создан, **Then** в продукте сохраняется только технический идентификатор, статус и связь с записью; платёжные реквизиты не сохраняются.
- **Трассировка**: PRD `FR-PAY-1`, research `10-*`

---

## EPIC H — Telegram‑экосистема (план/челлендж/консьерж/отписка)

### US-TG-01 — CTA в Telegram ведёт на конкретное действие (deep link)
- **JTBD**: When я нажимаю Telegram‑кнопку, I want сразу попасть в нужный флоу, So I can продолжить без лишних шагов.
- **User Story**: Как пользователь, я хочу, чтобы кнопки “получить план/сохранить” открывали конкретный сценарий в Telegram (бот/канал), чтобы не теряться.
- **Acceptance Criteria**
  - **Given** я нажимаю CTA “Telegram”, **Then** ссылка содержит UTM/deep link и ведёт на конкретное действие (план/челлендж/сохранение), а не на “главную”.
- **Трассировка**: PRD `FR-TG-1`, research `06-*`
- **События**: `cta_tg_click`, `tg_subscribe_confirmed`

### US-TG-02 — Онбординг 30–60 секунд и настройка частоты
- **JTBD**: When я подписался(лась), I want выбрать тему и частоту, So I can получать поддержку без спама.
- **User Story**: Как пользователь Telegram, я хочу пройти короткий онбординг и выбрать частоту сообщений, чтобы контроль был у меня.
- **Acceptance Criteria**
  - **Given** я стартую бот, **Then** он задаёт 2–4 коротких вопроса (тема, цель, частота) и выдаёт первый ресурс.
  - **Given** я хочу остановить серию, **Then** у меня есть понятная команда/кнопка “стоп/отписаться” и она работает.
- **Трассировка**: PRD `FR-TG-2`, `FR-TG-5`, research `06-*`

### US-TG-03 — “Консьерж записи” без обсуждения терапии
- **JTBD**: When я сомневаюсь, I want чтобы мне помогли выбрать слот/услугу, So I can записаться без лишнего стресса.
- **User Story**: Как пользователь, я хочу, чтобы Telegram‑консьерж помог выбрать формат и время, не вовлекая в терапевтические обсуждения.
- **Acceptance Criteria**
  - **Given** я в консьерж‑флоу, **Then** бот собирает 3–5 сервисных ответов (формат/время/цель) и даёт ссылку/варианты слотов.
  - **Given** я пытаюсь обсуждать “терапию” в боте, **Then** бот мягко ограничивает разговор и предлагает запись/официальный канал.
- **Трассировка**: PRD `FR-TG-4`, research `06-*`, `09-*`

---

## EPIC H2 — Уведомления (email/TG) и управление записью (перенос/отмена)

### US-NOTIF-01 — Получать подтверждения и напоминания (24ч/1ч)
- **JTBD**: When я записался(лась), I want получить подтверждение и напоминания, So I can не тревожиться и не забыть.
- **User Story**: Как пользователь, я хочу получать сервисные уведомления о записи и напоминания, чтобы подготовиться и прийти вовремя.
- **Acceptance Criteria**
  - **Given** запись подтверждена, **Then** отправляется подтверждение минимум на email (и/или Telegram при отдельном согласии на коммуникации).
  - **Given** встреча завтра, **Then** отправляется напоминание за 24 часа; **Given** встреча скоро, **Then** отправляется напоминание за 1 час.
  - **Given** уведомление отправлено, **Then** в тексте есть дата/время/таймзона, формат и ссылка/адрес (если применимо), без “продажных” призывов.
- **Трассировка**: PRD `FR-BKG-5`, research `05-*`, `03-*` (тон)

### US-NOTIF-02 — Перенести/отменить встречу по правилам (бережно)
- **JTBD**: When мне нужно перенести/отменить, I want сделать это понятно и безопасно, So I can не испытывать стыд и не потерять контроль.
- **User Story**: Как клиент, я хочу запросить перенос/отмену с понятной политикой, чтобы видеть последствия (депозит/сроки).
- **Acceptance Criteria**
  - **Given** у меня есть предстоящая встреча, **When** я нажимаю “перенести/отменить”, **Then** я вижу правила (например, 24 часа) и подтверждаю действие.
  - **Given** перенос/отмена выполнены, **Then** я получаю уведомление о новом статусе и следующем шаге (выбрать новый слот/связаться).
- **Трассировка**: PRD `FR-BKG-3`, `FR-BKG-5`, research `05-*`

---

## EPIC I — Личный кабинет клиента (встречи, дневники, экспорт, управление данными)

### US-LK-01 — Видеть встречи и материалы в одном месте
- **JTBD**: When я уже клиент, I want иметь “всё под рукой”, So I can меньше тревожиться и лучше готовиться.
- **User Story**: Как клиент, я хочу видеть предстоящие встречи, историю и материалы, чтобы ориентироваться в процессе.
- **Acceptance Criteria**
  - **Given** я вошёл(вошла) в ЛК, **Then** вижу список предстоящих/прошедших встреч и материалы/документы по ним (если есть).
- **Трассировка**: PRD `FR-LK-1`

### US-LK-02 — Вести дневники (эмоции + ABC) и удалять записи
- **JTBD**: When я хочу “тихий формат”, I want вести короткий дневник, So I can замечать динамику и приносить на консультацию.
- **User Story**: Как клиент, я хочу вести дневники (эмоции и ABC) с возможностью удаления, чтобы чувствовать контроль и приватность.
- **Acceptance Criteria**
  - **Given** я создаю запись дневника, **Then** ввод занимает 30–90 секунд и не требует лишних полей.
  - **Given** я хочу удалить запись, **Then** удаление доступно и подтверждается; запись пропадает из интерфейса.
- **Трассировка**: PRD `FR-LK-2`, research `04-*` (дневники), `10-*` (удаление)

### US-LK-03 — Экспорт PDF “показать на консультации”
- **JTBD**: When я иду на встречу, I want собрать заметки в PDF, So I can не держать всё в голове.
- **User Story**: Как клиент, я хочу экспортировать дневники в PDF, чтобы принести на консультацию.
- **Acceptance Criteria**
  - **Given** в дневнике есть записи, **When** я нажимаю “Экспорт PDF”, **Then** формируется файл с выбранным периодом и структурой (график/триггеры/примеры ABC — если есть).
- **Трассировка**: PRD `FR-LK-3`, research `04-*`

### US-LK-04 — Управлять своими данными и согласиями
- **JTBD**: When я думаю о приватности, I want скачать/удалить данные, So I can контролировать следы.
- **User Story**: Как клиент, я хочу в ЛК скачать данные, удалить аккаунт и отозвать согласия, чтобы управлять приватностью.
- **Acceptance Criteria**
  - **Given** я в настройках ЛК, **Then** вижу: “скачать данные”, “удалить аккаунт”, “управление согласиями/коммуникациями”.
  - **Given** я отзываю согласие на коммуникации, **Then** последующие коммуникации прекращаются (кроме обязательных сервисных для текущей записи, если применимо).
- **Трассировка**: PRD `FR-LK-4`, NFR `NFR-PRIV-*`, research `10-*`

---

## EPIC I2 — Мероприятия / комьюнити (лендинги, регистрация, правила)

### US-EVT-01 — Посмотреть мероприятие и зарегистрироваться
- **JTBD**: When я не готов(а) к личной терапии, I want прийти на вебинар/практику, So I can безопасно “потрогать” формат и доверие.
- **User Story**: Как гость, я хочу открыть страницу мероприятия и зарегистрироваться, чтобы получить подтверждение и материалы.
- **Acceptance Criteria**
  - **Given** я на лендинге события, **Then** вижу: “для кого”, программа/что будет, формат/длительность, кто ведёт, правила/дисклеймеры, форму регистрации.
  - **Given** я регистрируюсь, **Then** я вижу отдельное согласие на коммуникации (если будут напоминания/материалы) и получаю подтверждение регистрации.
- **Трассировка**: PRD `FR` (мероприятия в релизе 1), research `12-*`, `10-*`

### US-EVT-02 — После мероприятия есть “следующий шаг” без давления
- **JTBD**: When мероприятие закончилась, I want понять, что дальше, So I can продолжить поддержку в удобном формате.
- **User Story**: Как участник, я хочу получить материалы/ссылки и мягкий следующий шаг (ресурс/TG/запись), чтобы продолжить без давления.
- **Acceptance Criteria**
  - **Given** мероприятие завершено, **Then** участник получает материалы/ссылки и один из вариантов: Telegram/ресурс/запись, без агрессивного “продай”.
- **Трассировка**: research `12-*`, `06-*`, `03-*`

---

## EPIC J — Админ‑панель/CRM/аналитика/аудит‑лог

### US-ADM-01 — Роли и разграничение доступа
- **JTBD**: When в системе есть помощники, I want разделить доступ, So I can защищать чувствительные данные.
- **User Story**: Как owner, я хочу назначать роли (owner/assistant/content‑editor), чтобы ограничить доступ к данным.
- **Acceptance Criteria**
  - **Given** пользователь админки имеет роль, **Then** он видит только разрешённые разделы и действия.
- **Трассировка**: PRD `FR-ADM-1`, research `08-*`, `10-*`

### US-ADM-02 — Управлять расписанием, слотами, исключениями и буферами
- **JTBD**: When мне нужно менять расписание, I want делать это без разработчиков, So I can поддерживать актуальные слоты.
- **User Story**: Как owner/assistant, я хочу управлять слотами и исключениями, чтобы календарь записи был актуальным.
- **Acceptance Criteria**
  - **Given** я в админке расписания, **Then** могу создать/изменить/удалить слот, настроить повторение, исключения и буферы.
- **Трассировка**: PRD `FR-ADM-2`, research `08-*`

### US-ADM-03 — Управлять контентом с QA‑чеклистом публикации
- **JTBD**: When я публикую материалы, I want проходить чеклист, So I can не нарушить тон/закон.
- **User Story**: Как контент‑редактор, я хочу управлять статьями/ресурсами/лендингами и проходить чеклист перед публикацией.
- **Acceptance Criteria**
  - **Given** я публикую контент, **Then** система требует отметки чеклиста (дисклеймер/тон/CTA/перелинковка).
- **Трассировка**: PRD `FR-ADM-3`, research `08-*`, `03-*`

### US-ADM-04 — CRM‑воронка лидов и таймлайн событий
- **JTBD**: When я веду продукт, I want видеть путь пользователя, So I can улучшать конверсию и сервис.
- **User Story**: Как owner/assistant, я хочу видеть CRM‑лиды со статусами и таймлайном событий, чтобы понимать воронку.
- **Acceptance Criteria**
  - **Given** лид создан, **Then** у него есть источник/UTM, сегмент, статусы пайплайна и список событий без чувствительных текстов.
- **Трассировка**: PRD `FR-ADM-4`, `NFR-AN-*`, research `08-*`

### US-ADM-05 — Аудит‑лог критичных действий
- **JTBD**: When кто-то меняет цены или экспортирует данные, I want иметь след, So I can расследовать и соответствовать требованиям.
- **User Story**: Как owner, я хочу аудит‑лог по критичным действиям, чтобы повышать безопасность и прозрачность.
- **Acceptance Criteria**
  - **Given** админ меняет цену/политику или экспортирует данные, **Then** запись появляется в audit log (кто/когда/что), доступная owner.
- **Трассировка**: PRD `FR-ADM-5`, NFR `NFR-SEC-*`, research `08-*`, `10-*`

---

## EPIC K — Служебные страницы и комплаенс (RU) + возрастная политика 18+

### US-COM-01 — Доступные юридические документы и дисклеймеры
- **JTBD**: When я переживаю за конфиденциальность, I want увидеть политику и границы, So I can доверять и принимать решение.
- **User Story**: Как пользователь, я хочу легко найти политику/согласия/оферту/дисклеймеры, чтобы понимать правила и границы сервиса.
- **Acceptance Criteria**
  - **Given** я в футере или на страницах форм, **Then** доступны ссылки на: политика конфиденциальности, согласие на ПДн, оферта/правила оплаты/отмен, дисклеймер “не диагноз/не экстренная помощь”.
  - **Given** я на интерактиве/результате, **Then** дисклеймеры присутствуют в краткой форме и доступны в полной версии по ссылке.
- **Трассировка**: PRD `FR` (служебные страницы), NFR `NFR-PRIV-*`, research `10-*`, `03-*`

### US-COM-02 — Ограничение 18+ прозрачно и бережно
- **JTBD**: When я несовершеннолетний(ая), I want понять границы, So I can обратиться туда, где мне помогут.
- **User Story**: Как пользователь, я хочу ясно видеть ограничение 18+, чтобы не тратить силы и получить альтернативы.
- **Acceptance Criteria**
  - **Given** я попадаю на ключевые сценарии (запись/анкеты), **Then** ограничение “18+” явно обозначено.
  - **Given** пользователь указывает, что ему <18 (если этот вопрос есть), **Then** продукт не собирает лишние данные и показывает бережное объяснение + рекомендации “куда обратиться”.
- **Трассировка**: PRD constraints (18+), research `10-*`

---

## EPIC L — Качество UX: состояния загрузки/ошибок, базовая доступность (A11Y)

### US-UX-01 — Понятные состояния “загрузка/ошибка/пусто” на критичных шагах
- **JTBD**: When что-то не работает, I want увидеть понятное сообщение, So I can не винить себя и понять, что делать.
- **User Story**: Как пользователь, я хочу видеть бережные состояния загрузки/ошибок/пусто, чтобы продолжить сценарий.
- **Acceptance Criteria**
  - **Given** сеть/сервер недоступны, **Then** показывается сообщение без обвинения пользователя + кнопка “повторить”.
  - **Given** нет слотов, **Then** показывается пустое состояние “нет слотов” + варианты (лист ожидания/консьерж).
- **Трассировка**: PRD `NFR-UX-1`, research `11-*` (микрокопи), `05-*`

### US-UX-02 — Базовая доступность: клавиатура/фокус/семантика на формах
- **JTBD**: When я пользуюсь клавиатурой/скринридером, I want пройти сценарий, So I can записаться без барьеров.
- **User Story**: Как пользователь, я хочу, чтобы формы (запись/анкета/оплата) были доступны с клавиатуры, чтобы завершить запись.
- **Acceptance Criteria**
  - **Given** я прохожу сценарий с клавиатуры, **Then** фокус видим, порядок логичен, элементы управления доступны и подписаны.
- **Трассировка**: PRD `NFR-A11Y-1`

---

## 4) Минимальный набор end‑to‑end сценариев (smoke) для релиза 1
1) **Главная → мини‑диагностика → результат → Telegram план**  
1a) **Главная → навигатор состояния → план → Telegram**  
2) **Главная → Запись → услуга → слот → анкета → согласия → оплата → подтверждение**  
3) **Лендинг темы (SEO) → ресурс → сохранить → Telegram**  
3a) **Тема “границы” → скрипты границ → копировать → сохранить**  
3b) **Подготовка к первой встрече → черновик → записаться**  
4) **Нет слотов → лист ожидания**  
5) **ЛК → дневник → экспорт PDF → удалить запись**  
6) **Админка → слоты → контент публикация с чеклистом → CRM событие**  
7) **Кризисный триггер → экстренная помощь (без прогрева)**  
8) **Мероприятие → регистрация → подтверждение → материалы/следующий шаг**  

## 5) Открытые вопросы (для уточнения перед финализацией критериев)
- Какие именно **услуги/цены/депозит** входят в релиз 1 (список и параметры).
- Точный **текст политики отмен/переноса** (общая или по услугам).
- Как именно будет реализован Telegram: **канал/бот/гибрид**, подтверждение `tg_subscribe_confirmed`.
- Нужно ли **публично** показывать ближайшие слоты (или только внутри записи).

