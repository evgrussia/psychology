# Roadmap / Backlog — «Эмоциональный баланс»

**Версия:** v1.0  
**Дата:** 2026-01-07  
**Назначение:** единый “источник истины” по эпикам/фичам, приоритетам и последовательности релизов.  
**Опирается на:** `docs/PRD.md`, `docs/Technical-Decisions.md`, `docs/Admin-Panel-Specification.md`, `docs/Tracking-Plan.md`, `docs/Архитектурный-обзор.md`, `docs/Модель-данных.md`, `docs/Roadmap-P1-Activities.md`.

---

## 1) Как пользоваться документом

### 1.1 Иерархия
- **Release** → **Epics** → **Features** (фичи) → Stories/Tasks (в трекере разработки).
- Этот файл фиксирует **до уровня фич** (что делаем и в каком приоритете). Декомпозиция до задач — в Jira/Linear/YouTrack.

### 1.2 Приоритеты
- **P0** — must-have для релиза 1 (Go Live).
- **P1** — важные улучшения после релиза 1 (Release 1.x / Release 2).
- **P2** — позже/опционально (эксперименты, расширения, оптимизации).

### 1.3 Статусы
- `planned` → `in_design` → `in_dev` → `in_qa` → `released`  
- `blocked` (с причиной) / `deferred` (с датой пересмотра).

### 1.4 Оценка трудоёмкости (грубо, для роадмапа)
- **S**: 1–3 дн
- **M**: 4–10 дн
- **L**: 2–4 нед
- **XL**: 1+ мес (желательно дробить)

### 1.5 Ключевые неизменяемые принципы (guardrails)
- **Privacy by design**: без сырых ответов квизов/текстов дневников/анкеты/UGC в аналитике; по возможности — агрегаты (`result_level` и т.п.).
- **Кризисный режим** перекрывает “прогрев”: при триггерах — экстренная помощь и безопасная навигация.
- **Clean Architecture + DDD**: бизнес‑правила в домене/юзкейсах; интеграции за интерфейсами; зависимости направлены внутрь.

---

## 2) Релизы (верхнеуровневые цели)

### Release 1 (Go Live): “первая польза + доверие + запись/оплата + Telegram”
**Цель:** дать пользователю быстрый безопасный старт (1–3 минуты), укрепить доверие и обеспечить полноценную запись с оплатой + связку с Telegram.  
**Критерии успеха:** измеримость ключевых конверсий из PRD (booking/tg/quiz completion), без утечек PII/текстов в аналитику.

### Release 1.x (после запуска): “стабилизация и рост”
**Цель:** улучшения UX/конверсий на базе метрик, расширение контента, точечные P1‑механики удержания.

### Release 2: “удержание и операционка”
**Цель:** ретеншн‑механики из `docs/Roadmap-P1-Activities.md`, углубление аналитики, удобство поддержки админки/интерактивов.

---

## 3) Эпики (все релизы)

Нотация ID:
- **EPIC-*** — эпик.
- **FEAT-*** — фича (внутри эпика).

### EPIC-00 — Platform & Foundations (архитектура, окружения, базовые сервисы)
**Цель:** “скелет” системы для быстрой безопасной разработки и запуска.

### EPIC-01 — Public Web (главная, доверие, навигация)
**Цель:** быстрый вход в пользу, доверие и ясный путь к записи/Telegram.

### EPIC-02 — Content & SEO (CMS, статьи/ресурсы, лендинги тем)
**Цель:** контент как основной канал SEO и “бережной” помощи.

### EPIC-03 — Interactive (квизы/навигации/ритуалы/скрипты)
**Цель:** “time-to-benefit” через интерактивы + мягкие CTA.

### EPIC-04 — Booking (слоты, запись, конфликты)
**Цель:** прозрачная запись с таймзонами, без гонок и “тупиков”.

### EPIC-05 — Payments (ЮKassa)
**Цель:** надёжная оплата, идемпотентные вебхуки, корректные статусы.

### EPIC-06 — Telegram (канал + бот + deep links)
**Цель:** продолжение опыта в TG: онбординг, серии, консьерж, “сохранить”.

### EPIC-07 — Client Cabinet (ЛК: встречи/материалы/дневники/экспорт)
**Цель:** личный тихий режим (дневники/экспорт/управление данными).

### EPIC-08 — Admin Panel (контент, интерактивы, расписание, CRM, аудит)
**Цель:** операционка релиза 1 без “ручного ада”.

### EPIC-09 — UGC & Moderation (анонимный вопрос, очередь, кризис‑процедуры)
**Цель:** безопасный сбор UGC с правилами и SLA.

### EPIC-10 — Analytics & Observability (события, метрики, логи, алерты)
**Цель:** измеримость и управляемость, без нарушения приватности.

### EPIC-11 — Security/Privacy/Compliance (152‑ФЗ контекст)
**Цель:** минимизация данных, раздельные согласия, RBAC, аудит‑лог.

### EPIC-12 — Accessibility (A11y)
**Цель:** WCAG 2.2 AA на ключевых сценариях (интерактивы/запись).

---

## 4) Backlog: Release 1 (P0) — фичи по эпикам

> Ниже список P0 фич, которые составляют “Go Live”. Ссылки на первоисточники — в PRD/спеках.

### EPIC-00 — Platform & Foundations (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-PLT-01 | Репо‑скелет, CI/CD, окружения dev/stage/prod | L | — | planned |
| FEAT-PLT-02 | База данных + миграции по `docs/Модель-данных.md` | L | FEAT-PLT-01 | planned |
| FEAT-PLT-03 | RBAC (owner/assistant/editor/client) + сессии | M | FEAT-PLT-02 | planned |
| FEAT-PLT-04 | Медиа-статика (VPS локальное хранилище + `/media/*`) | M | FEAT-PLT-01 | planned |
| FEAT-PLT-05 | Аудит‑лог критичных действий (минимум) | M | FEAT-PLT-03 | planned |

### EPIC-01 — Public Web (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-WEB-01 | Главная как “путь клиента” + блоки доверия | M | FEAT-CNT-01, FEAT-INT-01 | planned |
| FEAT-WEB-02 | Страницы “О психологе” + “Как проходит” + FAQ + границы | M | FEAT-CNT-01 | planned |
| FEAT-WEB-03 | Служебные страницы (дисклеймеры/экстренная помощь/политики/оферта) | S–M | FEAT-CNT-01 | planned |

### EPIC-02 — Content & SEO (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-CNT-01 | CMS в админке: markdown + preview (статьи/ресурсы/лендинги) | L | FEAT-PLT-03, FEAT-PLT-04 | planned |
| FEAT-CNT-02 | Каталог тем релиза 1 (3–5) + лендинги тем | M | FEAT-CNT-01 | planned |
| FEAT-CNT-03 | `/glossary/` минимальная версия (10–15 терминов) | S–M | FEAT-CNT-01 | planned |
| FEAT-CNT-04 | `/curated/` минимальная версия (5 подборок) | S–M | FEAT-CNT-01 | planned |

### EPIC-03 — Interactive (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-INT-01 | Интерактивы без логина + сохранение агрегатов (`result_level`) | L | FEAT-PLT-02 | planned |
| FEAT-INT-02 | Квиз(ы) (QZ-01/02) с редактируемыми текстами в админке | L | FEAT-INT-01, FEAT-ADM-03 | planned |
| FEAT-INT-03 | Навигатор состояния (ветвление) — базовая версия | L | FEAT-INT-01 | planned |
| FEAT-INT-04 | “Скрипты границ” (BND-01) + библиотека вариантов | M | FEAT-INT-01, FEAT-ADM-03 | planned |
| FEAT-INT-05 | Библиотека мини‑ритуалов (2–5 мин) + таймер + аудио | M | FEAT-PLT-04, FEAT-ADM-03 | planned |
| FEAT-INT-06 | Кризисный режим (UI‑переключение + экстренная помощь) | M | FEAT-WEB-03 | planned |

**Особая зависимость (не блокирует старт разработки):** финальная валидация формулировок QZ-01/02 психологом (`docs/Technical-Decisions.md`).

### EPIC-04 — Booking (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-BKG-01 | Каталог услуг + правила (cancel/reschedule) | M | FEAT-CNT-01 | planned |
| FEAT-BKG-02 | Слоты и расписание: Google Calendar sync (двусторонняя) | XL | FEAT-PLT-02 | planned |
| FEAT-BKG-03 | UI записи: услуга → слот → анкета → согласия | L | FEAT-BKG-02, FEAT-PLT-03 | planned |
| FEAT-BKG-04 | Анти‑гонки: защита от конфликтов записи (FR-BKG-7) | M | FEAT-BKG-03 | planned |
| FEAT-BKG-05 | “Нет слотов” → waitlist / TG‑консьерж (не тупик) | M | FEAT-TG-02 | planned |

### EPIC-05 — Payments (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-PAY-01 | ЮKassa: создание платежа (депозит/оплата) | M | FEAT-BKG-03 | planned |
| FEAT-PAY-02 | ЮKassa webhooks: идемпотентность + истинные статусы | M | FEAT-PAY-01, FEAT-PLT-02 | planned |
| FEAT-PAY-03 | Подтверждение записи только после webhook succeeded | M | FEAT-PAY-02, FEAT-BKG-02 | planned |

### EPIC-06 — Telegram (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-TG-01 | Deep links schema + генерация `deep_link_id` | M | FEAT-PLT-02 | planned |
| FEAT-TG-02 | Бот: онбординг + “получить план/сохранить” + консьерж записи | L | FEAT-TG-01 | planned |
| FEAT-TG-03 | Канал: связка CTA/кнопки + измеримость подписки | S–M | FEAT-TG-01 | planned |

### EPIC-07 — Client Cabinet (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-LK-01 | ЛК: встречи/материалы (минимум) | M | FEAT-BKG-03 | planned |
| FEAT-LK-02 | Дневники (эмоции + ABC) + удаление | L | FEAT-PLT-03, FEAT-PLT-02 | planned |
| FEAT-LK-03 | Экспорт PDF “на консультацию” | M | FEAT-LK-02 | planned |
| FEAT-LK-04 | Управление данными: экспорт/удаление/отзыв согласий | M | FEAT-PLT-03 | planned |

### EPIC-08 — Admin Panel (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-ADM-01 | Админка: дашборд + доступы (desktop-only) | M | FEAT-PLT-03 | planned |
| FEAT-ADM-02 | Админка: расписание/слоты/исключения/буферы | L | FEAT-BKG-02 | planned |
| FEAT-ADM-03 | Админка: управление интерактивами (тексты/пороги/библиотеки) | L | FEAT-INT-01 | planned |
| FEAT-ADM-04 | Админка: CRM лиды + воронка статусов | M | FEAT-PLT-02 | planned |
| FEAT-ADM-05 | Админка: модерация UGC (очередь + статусы + шаблоны) | M | FEAT-MOD-01 | planned |
| FEAT-ADM-06 | Админка: базовая аналитика (дашборд KPI) | M | FEAT-AN-01 | planned |

### EPIC-09 — UGC & Moderation (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-MOD-01 | “Анонимный вопрос” + анти‑PII фильтры + кризис‑флаги | M | FEAT-PLT-02, FEAT-INT-06 | planned |
| FEAT-MOD-02 | Очередь модерации + SLA + аудит действий модератора | M | FEAT-ADM-05, FEAT-PLT-05 | planned |

### EPIC-10 — Analytics & Observability (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-AN-01 | Реализация Tracking Plan (события, запреты, склейка) | M | FEAT-PLT-02 | planned |
| FEAT-AN-02 | Серверные “истинные” события: оплата/подтверждение/встречи | M | FEAT-PAY-02, FEAT-BKG-02 | planned |
| FEAT-AN-03 | Логи/трейсы/алерты по критичным флоу | M | FEAT-PLT-01 | planned |

### EPIC-11 — Security/Privacy/Compliance (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-SEC-01 | Раздельные согласия + управление (web + ЛК) | M | FEAT-PLT-03 | planned |
| FEAT-SEC-02 | Шифрование P2 payload (анкеты/дневники/UGC тексты) | M | FEAT-PLT-02 | planned |
| FEAT-SEC-03 | Права доступа + аудит‑лог критичных операций | M | FEAT-PLT-05 | planned |

### EPIC-12 — Accessibility (P0)
| Feature ID | Название | Объём | Зависимости | Статус |
|---|---|---:|---|---|
| FEAT-A11Y-01 | WCAG 2.2 AA для интерактивов/booking (клавиатура/фокус/контраст) | M | FEAT-WEB-01, FEAT-BKG-03, FEAT-INT-* | planned |

---

## 5) Backlog: P1 (Release 1.x / Release 2) — после первых метрик

### P1: удержание и уникальные механики (из исследования)
См. отдельный документ: `docs/Roadmap-P1-Activities.md`.

### P1: продуктовые улучшения (на базе метрик)
| Feature ID | Название | Причина/сигнал | Объём |
|---|---|---|---:|
| FEAT-AN-11 | Детальная аналитика интерактивов (воронка по вопросам) | Нужна оптимизация completion/CTA | M |
| FEAT-INT-11 | Визуальный редактор структуры навигатора (ReactFlow/Mermaid) | Трудно поддерживать ветвления вручную | L |
| FEAT-WEB-11 | Улучшения конверсии: варианты CTA/структуры главной (без A/B инфраструктуры) | Низкая конверсия в booking/tg | S–M |
| FEAT-BKG-11 | Улучшение “нет слотов”: авто‑предложения альтернатив/окна | Частые отказы из-за расписания | S–M |

---

## 6) Backlog: P2 (позже/опционально)

| Feature ID | Название | Комментарий |
|---|---|---|
| FEAT-AB-01 | A/B инфраструктура (feature flags + рандомизация + дашборд) | По `docs/Technical-Decisions.md`: P2 |
| FEAT-AI-01 | AI‑агенты (навигация/консьерж/контент) | Только после guardrails + юридической оценки |
| FEAT-MOB-01 | Mobile‑admin (ограниченная) | По `docs/Technical-Decisions.md`: P2 |
| FEAT-RET-99 | Агрессивные retention‑механики (скидки/пакеты и т.п.) | Только если не конфликтует с позиционированием |

---

## 7) Definition of Done (DoD) для фичи релиза 1

- [ ] **PRD/Acceptance**: описаны AC и негативные кейсы.
- [ ] **Privacy**: события не содержат PII/тексты; P2 хранится шифрованно.
- [ ] **Security**: права доступа и аудит для админских операций.
- [ ] **A11y**: клавиатура, фокус, контраст, семантика на критичных экранах.
- [ ] **Analytics**: события из `docs/Tracking-Plan.md` подключены.
- [ ] **Observability**: есть логи по ошибкам/вебхукам/синхронизации, алерты на критичные сбои.
- [ ] **Docs**: есть техспека (см. `docs/Feature-Tech-Spec-Template.md`).

