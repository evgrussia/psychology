# ADR-003: Database — PostgreSQL

## Status
Accepted

## Date
2026-01-26

## Context
Требуется выбор основной базы данных для проекта. Требования:
- ACID-транзакции для критичных операций (booking, payments)
- Поддержка JSONB для гибкого хранения метаданных
- Интеграция с Django ORM
- Масштабируемость
- Надёжность

## Decision
Использовать **PostgreSQL** как основную базу данных.

## Consequences

### Positive
- Надёжность и ACID-транзакции
- JSONB для гибкого хранения (метаданные интерактивов, конфигурации)
- Полная поддержка в Django ORM
- Масштабируемость (репликация, партиционирование)
- Расширения (PostGIS при необходимости)
- Зрелость и стабильность

### Negative
- Требует больше ресурсов чем SQLite (но это ожидаемо для production)
- Нужна настройка и мониторинг

### Neutral
- Стандартный выбор для Django-проектов

## Alternatives Considered

### Option 1: MySQL
- **Description:** Популярная реляционная БД
- **Pros:** Широкое использование, хорошая производительность
- **Cons:** Меньше возможностей JSON, менее строгая проверка типов
- **Why not:** PostgreSQL лучше подходит для JSONB и имеет более строгую типизацию

### Option 2: MongoDB
- **Description:** NoSQL документная БД
- **Pros:** Гибкая схема, хороша для JSON-данных
- **Cons:** Нет нативной поддержки в Django ORM, нет ACID-транзакций (в старых версиях), не подходит для реляционных данных
- **Why not:** Проект требует ACID-транзакции и реляционную модель для booking/payments

## References
- `docs/Модель-данных.md` — физическая схема БД
- `docs/Domain-Model-Specification.md` — доменная модель
- `docs/Technical-Decisions.md` — раздел 3
