# –û—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è API Endpoints

**–î–∞—Ç–∞:** 2026-01-27  
**–ê–≥–µ–Ω—Ç:** Coder Agent  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–±–æ—Ç–µ

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### 1. –ê—É–¥–∏—Ç endpoints ‚úÖ

–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ endpoints –∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ Phase 5:

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ endpoints:**
- ‚úÖ Auth: register, login, refresh, logout
- ‚úÖ Booking: services, appointments, slots
- ‚úÖ Interactive: quizzes, runs, diaries
- ‚úÖ Content: articles, resources
- ‚úÖ Cabinet: appointments, diaries, export, delete
- ‚úÖ Payments: list payments
- ‚úÖ Webhooks: yookassa, telegram
- ‚úÖ Admin: appointments, leads, content, moderation
- ‚úÖ Moderation: questions

**–í—ã–≤–æ–¥:** –í—Å–µ endpoints –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ `urls.py` –∏ –∏–º–µ—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ ViewSets/Views.

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

#### C-002: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `get_django_model()` –≤ auth.py

**–ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- `backend/presentation/api/v1/views/auth.py:90,151` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `get_django_model()` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JWT —Ç–æ–∫–µ–Ω–æ–≤
- –ú–µ—Ç–æ–¥ `get_django_model()` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è JWT

**–ê–Ω–∞–ª–∏–∑:**
- JWT —Ç–æ–∫–µ–Ω—ã –≤ Django REST Framework —Ç—Ä–µ–±—É—é—Ç Django –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `get_django_model()` - —ç—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Django-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ú–µ—Ç–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Infrastructure Layer (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π), —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Clean Architecture
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –∞ –Ω–µ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ ORM

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –≠—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–æ –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –ú–µ—Ç–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Å–ª–æ–µ (Infrastructure)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–±–ª—é–¥–∞–µ—Ç Clean Architecture
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å: —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤, –Ω–æ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

#### C-003: –ü—Ä–æ–≤–µ—Ä–∫–∞ booking.py

**–ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- Verification report —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–æ–∫—É 477 –≤ `booking.py`

**–ê–Ω–∞–ª–∏–∑:**
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –≤ `booking.py:477` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `PostgresAvailabilitySlotRepository`
- –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ ORM
- –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Clean Architecture

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ - –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 3. –¢–µ—Å—Ç—ã

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã:**
- ‚úÖ `tests/presentation/api/v1/views/test_auth.py` - –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è auth
- ‚úÖ `tests/presentation/api/v1/views/test_booking.py` - –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è booking
- ‚úÖ `tests/presentation/api/v1/serializers/test_auth.py` - —Ç–µ—Å—Ç—ã –¥–ª—è auth serializers
- ‚úÖ –î—Ä—É–≥–∏–µ —Ç–µ—Å—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –¢–µ—Å—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ (–Ω—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è)
- ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (factory-boy)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ
2. –î–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è edge cases
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ üî¥

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏**
   - –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: ~5% (–ø–æ verification report)
   - –ù—É–∂–Ω–æ: –º–∏–Ω–∏–º—É–º 30-40% –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö endpoints

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç üü†

2. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤**
   - –ú–æ–¥—É–ª—å `factory` –Ω–µ –Ω–∞–π–¥–µ–Ω –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤
   - –†–µ—à–µ–Ω–∏–µ: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç üü°

3. **–£–ª—É—á—à–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã JWT**
   - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤
   - –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, —Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   cd backend
   pip install -r requirements.txt
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ:**
   ```bash
   pytest tests/presentation/ -v --cov=presentation --cov-report=term-missing
   ```

3. **–î–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö endpoints:**
   - Auth endpoints (register, login, refresh, logout)
   - Booking endpoints (services, appointments)
   - Payments endpoints

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
2. –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –¥–æ 80%+
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è edge cases

## –í—ã–≤–æ–¥—ã

1. ‚úÖ –í—Å–µ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
2. ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `get_django_model()` –¥–æ–ø—É—Å—Ç–∏–º–æ)
3. ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
4. ‚ö†Ô∏è –ù—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** Endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –Ω–æ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

---
*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: Coder Agent*
